{"remainingRequest":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\src\\views\\MDS\\MDS_exchequer\\MDS_exchequer_adjust_material.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\src\\views\\MDS\\MDS_exchequer\\MDS_exchequer_adjust_material.vue","mtime":1616052285149},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLk1EU19leGNoZXF1ZXJfYWRqdXN0X3N1cHBpbGVzIHsNCiAgLmFudC10YWJsZSB7DQogICAgaW1nIHsNCiAgICAgIHdpZHRoOiAxMjBweDsNCiAgICAgIHdpZHRoOiAxMjBweDsNCiAgICB9DQogICAgdGggew0KICAgICAgZm9udC1zaXplOiAxNnB4Ow0KICAgICAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgICB9DQogICAgdGQgew0KICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZSAhaW1wb3J0YW50Ow0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["MDS_exchequer_adjust_material.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MDS_exchequer_adjust_material.vue","sourceRoot":"src/views/MDS/MDS_exchequer","sourcesContent":["<template>\r\n  <div class=\"MDS_exchequer_adjust_suppiles\">\r\n    <a-row :gutter=\"[8, 8]\">\r\n      <a-col :span=\"10\">\r\n        <a-row :gutter=\"[8, 8]\">\r\n          <a-col :span=\"24\">\r\n            <a-card size=\"small\">\r\n              <a-row :gutter=\"[8, 8]\">\r\n                <a-col :span=\"24\" style=\"margin: 0.2em 0px;\">\r\n                  <a-card-meta\r\n                    :title=\"\r\n                      'รายละเอียดวัสดุหมายเลข : ' + this.material.material_code\r\n                    \"\r\n                  >\r\n                    <a-icon\r\n                      slot=\"avatar\"\r\n                      type=\"file-search\"\r\n                      :style=\"{\r\n                        fontSize: '150%',\r\n                      }\"\r\n                    />\r\n                  </a-card-meta>\r\n                </a-col>\r\n              </a-row>\r\n              <hr style=\"width:100%\" />\r\n              <a-row :gutter=\"[8, 8]\" type=\"flex\">\r\n                <a-col :span=\"12\" style=\"text-align:center\">\r\n                  <img\r\n                    alt=\"example\"\r\n                    width=\"50%\"\r\n                    :src=\"this.material.material_image\"\r\n                  />\r\n                </a-col>\r\n                <a-col :span=\"12\">\r\n                  <p><b>หมายเลขวัสดุ</b> : {{ this.material.material_code }}</p>\r\n                  <p><b>ชื่อวัสดุ</b> : {{ this.material.material_name }}</p>\r\n                  <p><b>หมวดหมู่</b> : {{ this.material.material_type }}</p>\r\n                  <p><b>หน่วยนับ </b> : {{ this.material.material_unit }}</p>\r\n                  <p>\r\n                    <b>จำนวนคงเหลือ </b> : {{ this.material.material_balance }}\r\n                  </p>\r\n                  <p>\r\n                    <b>สถานะ </b> :\r\n                    <a-tag :color=\"'#28a745'\">\r\n                      เบิกได้\r\n                    </a-tag>\r\n                  </p>\r\n                </a-col>\r\n              </a-row>\r\n            </a-card>\r\n          </a-col>\r\n          <a-col :span=\"24\">\r\n            <a-card size=\"small\">\r\n              <a-row :gutter=\"[8, 8]\">\r\n                <a-col :span=\"24\" style=\"margin: 0.2em 0px;\">\r\n                  <a-card-meta\r\n                    :title=\"\r\n                      'รายการนำเข้าของวัสดุหมายเลข : ' +\r\n                        this.material.material_code\r\n                    \"\r\n                  >\r\n                    <a-icon\r\n                      slot=\"avatar\"\r\n                      type=\"inbox\"\r\n                      :style=\"{\r\n                        fontSize: '150%',\r\n                      }\"\r\n                    />\r\n                  </a-card-meta>\r\n                </a-col>\r\n              </a-row>\r\n              <hr style=\"width:100%\" />\r\n              <a-row :gutter=\"[8, 8]\" type=\"flex\">\r\n                <a-col :span=\"24\" style=\"text-align:center\">\r\n                  <a-table\r\n                    :columns=\"columns_material_import\"\r\n                    :data-source=\"material_import\"\r\n                    :pagination=\"false\"\r\n                    size=\"small\"\r\n                    bordered\r\n                  >\r\n                    <span slot=\"key\" slot-scope=\"text, record, index\">\r\n                      <div :style=\"{ textAlign: 'center' }\">\r\n                        {{ index + 1 }}\r\n                      </div>\r\n                    </span>\r\n                    <span slot=\"material_import_code\" slot-scope=\"text\">\r\n                      <div>\r\n                        {{ text }}\r\n                      </div>\r\n                    </span>\r\n                    <span slot=\"material_import_date\" slot-scope=\"text\">\r\n                      <div :style=\"{ textAlign: 'center' }\">\r\n                        {{ text }}\r\n                      </div>\r\n                    </span>\r\n                    <span slot=\"material_import_amount\" slot-scope=\"text\">\r\n                      <div :style=\"{ textAlign: 'center' }\">\r\n                        {{ text }}\r\n                      </div>\r\n                    </span>\r\n                    <span slot=\"material_import_balance\" slot-scope=\"text\">\r\n                      <div :style=\"{ textAlign: 'center' }\">\r\n                        {{ text }}\r\n                      </div>\r\n                    </span>\r\n                    <span slot=\"action\" slot-scope=\"text, record\">\r\n                      <div :style=\"{ textAlign: 'center' }\">\r\n                        <a-button\r\n                          icon=\"block\"\r\n                          type=\"info\"\r\n                          @click=\"\r\n                            getMaterialList(\r\n                              record.material_import_code,\r\n                              record.material_import_id\r\n                            )\r\n                          \"\r\n                        />\r\n                      </div>\r\n                    </span>\r\n                  </a-table>\r\n                </a-col>\r\n              </a-row>\r\n              <br />\r\n              <a-row>\r\n                <a-col :span=\"15\">\r\n                  <p :style=\"{ margin: '0.3em 0.5%' }\">1-10 จาก 10 รายการ</p>\r\n                </a-col>\r\n                <a-col :span=\"9\" :style=\"{ textAlign: 'Right' }\">\r\n                  แสดงทีละ\r\n                  <a-select\r\n                    default-value=\"10\"\r\n                    :style=\"{ width: '60px', marginRight: '1%' }\"\r\n                  >\r\n                    <a-select-option value=\"10\">\r\n                      10\r\n                    </a-select-option>\r\n                    <a-select-option value=\"25\">\r\n                      25\r\n                    </a-select-option>\r\n                    <a-select-option value=\"50\">\r\n                      50\r\n                    </a-select-option>\r\n                    <a-select-option value=\"100\">\r\n                      100\r\n                    </a-select-option>\r\n                  </a-select>\r\n\r\n                  <a-pagination\r\n                    :style=\"{ display: 'inline' }\"\r\n                    v-model=\"current\"\r\n                    :total=\"total\"\r\n                    :page-size=\"10\"\r\n                  />\r\n                </a-col>\r\n              </a-row>\r\n            </a-card>\r\n          </a-col>\r\n        </a-row>\r\n      </a-col>\r\n      <a-col :span=\"14\">\r\n        <a-card size=\"small\" v-if=\"material_import_code !== ''\">\r\n          <a-row :gutter=\"[8, 8]\">\r\n            <a-col :span=\"24\" style=\"margin: 0.2em 0px;\">\r\n              <a-card-meta\r\n                :title=\"'รายการปรับยอดวัสดุหมายเลข : ' + material_import_code\"\r\n              >\r\n                <a-icon\r\n                  slot=\"avatar\"\r\n                  type=\"block\"\r\n                  :style=\"{\r\n                    fontSize: '150%',\r\n                  }\"\r\n                />\r\n              </a-card-meta>\r\n            </a-col>\r\n          </a-row>\r\n          <hr style=\"width:100%\" />\r\n          <a-row :gutter=\"[8, 8]\" type=\"flex\">\r\n            <a-col :span=\"24\">\r\n              <a-table\r\n                :columns=\"columns_material_adjust\"\r\n                :data-source=\"material_adjust\"\r\n                :pagination=\"false\"\r\n                size=\"small\"\r\n                bordered\r\n              >\r\n                <span slot=\"key\" slot-scope=\"text, record, index\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{ index + 1 }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"material_adjust_date\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"material_adjust_type\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"material_adjust_amount\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n                <span\r\n                  slot=\"material_adjust_adjust\"\r\n                  slot-scope=\"text, record, index\"\r\n                >\r\n                  <div\r\n                    :style=\"{ textAlign: 'center' }\"\r\n                    v-if=\"\r\n                      index + 1 != material_adjust.length ||\r\n                        record.material_adjust_balacne === 0\r\n                    \"\r\n                  >\r\n                    {{ text }}\r\n                  </div>\r\n                  <div\r\n                    :style=\"{ textAlign: 'center' }\"\r\n                    v-if=\"\r\n                      index + 1 == material_adjust.length &&\r\n                        record.material_adjust_balacne !== 0\r\n                    \"\r\n                  >\r\n                    <a-input-number\r\n                      :min=\"0\"\r\n                      :max=\"material_adjust[index - 1].material_adjust_balacne\"\r\n                      :default-value=\"0\"\r\n                      v-model=\"material_adjust[index].material_adjust_adjust\"\r\n                    />\r\n                  </div>\r\n                </span>\r\n                <span\r\n                  slot=\"material_adjust_balacne\"\r\n                  slot-scope=\"text, record, index\"\r\n                >\r\n                  <div\r\n                    :style=\"{ textAlign: 'center' }\"\r\n                    v-if=\"index + 1 != material_adjust.length\"\r\n                  >\r\n                    {{\r\n                      record.material_adjust_amount -\r\n                        record.material_adjust_adjust\r\n                    }}\r\n                  </div>\r\n                  <div\r\n                    :style=\"{ textAlign: 'center' }\"\r\n                    v-if=\"index + 1 == material_adjust.length\"\r\n                  >\r\n                    {{\r\n                      record.material_adjust_amount -\r\n                        record.material_adjust_adjust\r\n                    }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"material_adjust_creator\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n                <span\r\n                  slot=\"material_adjust_note\"\r\n                  slot-scope=\"text, record, index\"\r\n                >\r\n                  <div\r\n                    v-if=\"\r\n                      index + 1 != material_adjust.length ||\r\n                        record.material_adjust_balacne === 0\r\n                    \"\r\n                  >\r\n                    {{ text }}\r\n                  </div>\r\n                  <div\r\n                    :style=\"{ textAlign: 'center' }\"\r\n                    v-if=\"\r\n                      index + 1 == material_adjust.length &&\r\n                        record.material_adjust_balacne !== 0\r\n                    \"\r\n                  >\r\n                    <a-input\r\n                      v-model=\"material_adjust[index].material_adjust_note\"\r\n                      placeholder=\"หมายเหตุการปรับรายการ\"\r\n                    />\r\n                  </div>\r\n                </span>\r\n                <span slot=\"action\" slot-scope=\"text, record, index\">\r\n                  <div\r\n                    :style=\"{ textAlign: 'center' }\"\r\n                    v-if=\"index + 1 != material_adjust.length\"\r\n                  >\r\n                    <div :style=\"{ textAlign: 'center' }\">\r\n                      <a-tooltip placement=\"top\">\r\n                        <template slot=\"title\">\r\n                          <span>ลบรายการปรับยอด</span>\r\n                        </template>\r\n                        <a-button\r\n                          icon=\"close\"\r\n                          type=\"danger\"\r\n                          :disabled=\"\r\n                            index === 0 || index < material_adjust.length - 2\r\n                          \"\r\n                          @click=\"deleteAdjustmaterial(index)\"\r\n                        />\r\n                      </a-tooltip>\r\n                    </div>\r\n                  </div>\r\n                  <div\r\n                    :style=\"{ textAlign: 'center' }\"\r\n                    v-if=\"index + 1 == material_adjust.length\"\r\n                  >\r\n                    <div :style=\"{ textAlign: 'center' }\">\r\n                      <a-tooltip placement=\"top\">\r\n                        <template slot=\"title\">\r\n                          <span>บันทึกรายการปรับยอด</span>\r\n                        </template>\r\n                        <a-button\r\n                          icon=\"save\"\r\n                          type=\"success\"\r\n                          :disabled=\"record.material_adjust_balacne === 0\"\r\n                          @click=\"saveAdjustmaterial(index)\"\r\n                        />\r\n                      </a-tooltip>\r\n                    </div>\r\n                  </div>\r\n                </span>\r\n              </a-table>\r\n            </a-col>\r\n          </a-row>\r\n        </a-card>\r\n        <a-card size=\"small\" v-if=\"material_import_code === ''\">\r\n          <a-row :gutter=\"[8, 8]\">\r\n            <a-col :span=\"24\" style=\"margin: 0.2em 0px;\">\r\n              <a-card-meta :title=\"'รายการปรับยอดวัสดุ'\">\r\n                <a-icon\r\n                  slot=\"avatar\"\r\n                  type=\"block\"\r\n                  :style=\"{\r\n                    fontSize: '150%',\r\n                  }\"\r\n                />\r\n              </a-card-meta>\r\n            </a-col>\r\n          </a-row>\r\n          <hr style=\"width:100%\" />\r\n          <a-row :gutter=\"[8, 8]\" type=\"flex\">\r\n            <a-col :span=\"24\"> </a-col>\r\n          </a-row>\r\n        </a-card>\r\n      </a-col>\r\n    </a-row>\r\n  </div>\r\n</template>\r\n<script>\r\nconst axios = require(\"axios\");\r\nexport default {\r\n  components: {},\r\n  data() {\r\n    return {\r\n      month: [\r\n        \"ม.ค.\",\r\n        \"ก.พ.\",\r\n        \"มี.ค.\",\r\n        \"เม.ย.\",\r\n        \"พ.ค.\",\r\n        \"มิ.ย.\",\r\n        \"ก.ค.\",\r\n        \"ส.ค.\",\r\n        \"ก.ย.\",\r\n        \"ต.ค.\",\r\n        \"พ.ย.\",\r\n        \"ธ.ค.\",\r\n      ],\r\n      total: 0,\r\n      current: 10,\r\n      material_code_search: \"\",\r\n      material_import_code: \"\",\r\n      material_import_id_search: \"\",\r\n      material: {},\r\n      columns_material_import: [\r\n        {\r\n          title: \"#\",\r\n          dataIndex: \"key\",\r\n          key: \"key\",\r\n          width: \"3%\",\r\n          scopedSlots: {\r\n            customRender: \"key\",\r\n          },\r\n          type: \"flex\",\r\n          align: \"top\",\r\n        },\r\n        {\r\n          title: \"หมายเลขรายการนำเข้า\",\r\n          dataIndex: \"material_import_code\",\r\n          key: \"material_import_code\",\r\n          width: \"15%\",\r\n          scopedSlots: {\r\n            customRender: \"material_import_code\",\r\n          },\r\n        },\r\n        {\r\n          title: \"วันที่นำเข้าวัสดุ\",\r\n          dataIndex: \"material_import_date\",\r\n          key: \"material_import_date\",\r\n          width: \"10%\",\r\n          scopedSlots: {\r\n            customRender: \"material_import_date\",\r\n          },\r\n        },\r\n        {\r\n          title: \"จำนวน\",\r\n          children: [\r\n            {\r\n              title: \"นำเข้า\",\r\n              dataIndex: \"material_import_amount\",\r\n              key: \"material_import_amount\",\r\n              width: \"5%\",\r\n              scopedSlots: { customRender: \"material_import_amount\" },\r\n            },\r\n            {\r\n              title: \"คงเหลือ\",\r\n              dataIndex: \"material_import_balance\",\r\n              key: \"material_import_balance\",\r\n              width: \"5%\",\r\n              scopedSlots: { customRender: \"material_import_balance\" },\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          title: \"\",\r\n          dataIndex: \"action\",\r\n          key: \"action\",\r\n          width: \"3%\",\r\n          scopedSlots: { customRender: \"action\" },\r\n        },\r\n      ],\r\n      material_import: [],\r\n      columns_material_adjust: [\r\n        {\r\n          title: \"#\",\r\n          dataIndex: \"key\",\r\n          key: \"key\",\r\n          width: \"2%\",\r\n          scopedSlots: {\r\n            customRender: \"key\",\r\n          },\r\n          type: \"flex\",\r\n          align: \"top\",\r\n        },\r\n        {\r\n          title: \"วันที่\",\r\n          dataIndex: \"material_adjust_date\",\r\n          key: \"material_adjust_date\",\r\n          width: \"5%\",\r\n          scopedSlots: {\r\n            customRender: \"material_adjust_date\",\r\n          },\r\n        },\r\n        {\r\n          title: \"ประเภท\",\r\n          dataIndex: \"material_adjust_type\",\r\n          key: \"material_adjust_type\",\r\n          width: \"5%\",\r\n          scopedSlots: {\r\n            customRender: \"material_adjust_type\",\r\n          },\r\n        },\r\n        {\r\n          title: \"จำนวน\",\r\n          children: [\r\n            {\r\n              title: \"ยอดเดิม\",\r\n              dataIndex: \"material_adjust_amount\",\r\n              key: \"material_adjust_amount\",\r\n              width: \"6%\",\r\n              scopedSlots: { customRender: \"material_adjust_amount\" },\r\n            },\r\n            {\r\n              title: \"ปรับยอด\",\r\n              dataIndex: \"material_adjust_adjust\",\r\n              key: \"material_adjust_adjust\",\r\n              width: \"5%\",\r\n              scopedSlots: { customRender: \"material_adjust_adjust\" },\r\n            },\r\n            {\r\n              title: \"คงเหลือ\",\r\n              dataIndex: \"material_adjust_balacne\",\r\n              key: \"material_adjust_balacne\",\r\n              width: \"6%\",\r\n              scopedSlots: { customRender: \"material_adjust_balacne\" },\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          title: \"ผู้ทำรายการ\",\r\n          dataIndex: \"material_adjust_creator\",\r\n          key: \"material_adjust_creator\",\r\n          width: \"5%\",\r\n          scopedSlots: { customRender: \"material_adjust_creator\" },\r\n        },\r\n        {\r\n          title: \"หมายเหตุ\",\r\n          dataIndex: \"material_adjust_note\",\r\n          key: \"material_adjust_note\",\r\n          width: \"10%\",\r\n          scopedSlots: { customRender: \"material_adjust_note\" },\r\n        },\r\n        {\r\n          title: \"ดำเนินการ\",\r\n          dataIndex: \"action\",\r\n          key: \"action\",\r\n          width: \"3%\",\r\n          scopedSlots: { customRender: \"action\" },\r\n        },\r\n      ],\r\n      material_adjust: [],\r\n      index_adjust: 1,\r\n    };\r\n  },\r\n  methods: {\r\n    genDate(date) {\r\n      const self = this;\r\n      let dateThai = new Date(date).toISOString().split(\"T\")[0];\r\n      dateThai = `${dateThai.split(\"-\")[2]} ${\r\n        self.month[parseInt(dateThai.split(\"-\")[1] - 1)]\r\n      } ${parseInt(dateThai.split(\"-\")[0]) + 543}`;\r\n      return dateThai;\r\n    },\r\n    saveAdjustmaterial(index) {\r\n      const self = this;\r\n      console.log(index);\r\n      let data = {\r\n        purchase_order_id: self.material_import_id_search,\r\n        material_adjust_amount:\r\n          self.material_adjust[index].material_adjust_adjust,\r\n        material_adjust_balance:\r\n          self.material_adjust[index].material_adjust_balacne -\r\n          self.material_adjust[index].material_adjust_adjust,\r\n        material_adjust_create_by: self.$store.state.user.user_id,\r\n        note:\r\n          self.material_adjust[index].material_adjust_note != undefined\r\n            ? self.material_adjust[index].material_adjust_note\r\n            : \" \",\r\n      };\r\n      console.log(data);\r\n      axios\r\n        .post(self.$store.state.url + \"/adjustRouters/insertAdjust\", data)\r\n        .then(function(res) {\r\n          console.log(res);\r\n\r\n          self.material_adjust[index].material_adjust_id = res.data.results;\r\n          console.log(self.material_adjust[index].material_adjust_id);\r\n          self.material_adjust.push({\r\n            key: self.index_adjust,\r\n            material_adjust_id: undefined,\r\n            material_adjust_date: self.genDate(new Date()),\r\n            material_adjust_type: \"ปรับยอด\",\r\n            material_adjust_amount: data.material_adjust_balance,\r\n            material_adjust_adjust: 0,\r\n            material_adjust_balacne: data.material_adjust_balance,\r\n            material_adjust_creator: self.$store.state.user.user_name,\r\n            material_adjust_note: undefined,\r\n          });\r\n          self.index_adjust++;\r\n          self.material.material_balance =\r\n            self.material.material_balance -\r\n            self.material_adjust[index].material_adjust_adjust;\r\n          self.material_import[\r\n            self.material_import.findIndex(\r\n              (ele) => ele.material_import_id === self.material_import_id_search\r\n            )\r\n          ].material_import_balance =\r\n            self.material_import[\r\n              self.material_import.findIndex(\r\n                (ele) =>\r\n                  ele.material_import_id === self.material_import_id_search\r\n              )\r\n            ].material_import_balance -\r\n            self.material_adjust[index].material_adjust_adjust;\r\n        });\r\n    },\r\n    deleteAdjustmaterial(index) {\r\n      const self = this;\r\n      console.log(index);\r\n      let data = {\r\n        material_adjust_id: self.material_adjust[index].material_adjust_id,\r\n        purchase_order_id: self.material_import_id_search,\r\n        material_adjust_amount:\r\n          self.material_adjust[index].material_adjust_adjust,\r\n        material_adjust_create_by: self.$store.state.user.user_id,\r\n      };\r\n      axios\r\n        .post(self.$store.state.url + \"/adjustRouters/deleteAdjust\", data)\r\n        .then(function(res) {\r\n          console.log(res);\r\n          self.index_adjust--;\r\n          self.material_adjust[index + 1].key = \"\";\r\n          self.material_adjust[index + 1].material_adjust_amount =\r\n            self.material_adjust[index].material_adjust_balacne;\r\n          self.material_adjust[index + 1].material_adjust_adjust = 0;\r\n          self.material_adjust[index + 1].material_adjust_balacne =\r\n            self.material_adjust[index].material_adjust_balacne;\r\n          console.log(index);\r\n          self.material.material_balance =\r\n            self.material.material_balance +\r\n            self.material_adjust[index].material_adjust_adjust;\r\n          self.material_import[\r\n            self.material_import.findIndex(\r\n              (ele) => ele.material_import_id === self.material_import_id_search\r\n            )\r\n          ].material_import_balance =\r\n            self.material_import[\r\n              self.material_import.findIndex(\r\n                (ele) =>\r\n                  ele.material_import_id === self.material_import_id_search\r\n              )\r\n            ].material_import_balance +\r\n            self.material_adjust[index].material_adjust_adjust;\r\n          self.material_adjust.splice(index, 1);\r\n        })\r\n        .catch(function(err) {\r\n          console.log(err);\r\n        });\r\n    },\r\n    getByMaterialCode() {\r\n      const self = this;\r\n      axios\r\n        .post(self.$store.state.url + \"/adjustRouters/getMaterialDetail\", {\r\n          material_code: self.material_code_search,\r\n        })\r\n        .then(function(res) {\r\n          console.log(res);\r\n          let data = res.data.results[0];\r\n          console.log(data);\r\n          let obj = {\r\n            material_code: data.material_code,\r\n            material_image: data.material_image,\r\n            material_name: data.material_name,\r\n            material_type: data.type_name,\r\n            material_unit: data.unit_name,\r\n            material_minimum: data.material_minimun,\r\n            material_status: [\r\n              {\r\n                status: data.material_status,\r\n                tag: data.material_status_tag,\r\n              },\r\n            ],\r\n            material_balance: data.material_balance,\r\n          };\r\n          self.material = obj;\r\n        })\r\n        .catch(function(err) {\r\n          console.log(err);\r\n        });\r\n    },\r\n    getMaterialimport() {\r\n      const self = this;\r\n      axios\r\n        .post(self.$store.state.url + \"/adjustRouters/getMaterialimport\", {\r\n          material_code: self.material_code_search,\r\n          start: 1,\r\n          end: 10,\r\n        })\r\n        .then(function(res) {\r\n          console.log(res);\r\n          let data = res.data.results;\r\n          self.material_import = [];\r\n          data.forEach(function(ele, index) {\r\n            console.log(ele);\r\n            self.material_import.push({\r\n              key: index + 1,\r\n              material_import_id: ele.purchase_order_material_id,\r\n              material_import_code: ele.purchase_order_code,\r\n              material_import_date: self.genDate(\r\n                ele.purchase_order_material_create_date\r\n              ),\r\n              material_import_amount: ele.purchase_order_material_import_amount,\r\n              material_import_balance:\r\n                ele.purchase_order_material_balance_amount,\r\n            });\r\n          });\r\n        })\r\n        .catch(function(err) {\r\n          console.log(err);\r\n        });\r\n    },\r\n    getMaterialList(material_import_code, material_import_id) {\r\n      const self = this;\r\n      self.material_import_code = material_import_code;\r\n      self.material_import_id_search = material_import_id;\r\n      console.log(material_import_code);\r\n      axios\r\n        .post(self.$store.state.url + \"/adjustRouters/getAdjustlist\", {\r\n          material_code: self.material_code_search,\r\n          purchase_order_material_id: self.material_import_id_search,\r\n        })\r\n        .then(function(res) {\r\n          console.log(\"adjust\");\r\n          console.log(res);\r\n          self.material_adjust = [];\r\n          let balacne = 0;\r\n          res.data.results.forEach(function(ele, index) {\r\n            self.material_adjust.push({\r\n              key: index + 1,\r\n              material_adjust_id: ele.adjust_id,\r\n              material_adjust_date: self.genDate(ele.adjust_date),\r\n              material_adjust_type:\r\n                ele.adjust_type === 1\r\n                  ? \"นำเข้าวัสดุ\"\r\n                  : ele.adjust_type === 2\r\n                  ? \"ปรับยอด\"\r\n                  : \"เบิกจ่าย\",\r\n              material_adjust_amount: index == 0 ? ele.adjsut_amount : balacne,\r\n              material_adjust_adjust: index == 0 ? balacne : ele.adjsut_amount,\r\n              material_adjust_balacne: ele.adjust_balance,\r\n              material_adjust_creator: ele.adjust_create_dy,\r\n              material_adjust_note: ele.adjust_note,\r\n            });\r\n            balacne = ele.adjust_balance;\r\n            console.log(ele.adjust_balance);\r\n            self.index_adjust++;\r\n          });\r\n          console.log(balacne);\r\n          self.material_adjust.push({\r\n            key: self.index_adjust,\r\n            material_adjust_id: undefined,\r\n            material_adjust_date: self.genDate(new Date()),\r\n            material_adjust_type: \"ปรับยอด\",\r\n            material_adjust_amount: balacne,\r\n            material_adjust_adjust: 0,\r\n            material_adjust_balacne: balacne,\r\n            material_adjust_creator: self.$store.state.user.user_name,\r\n            material_adjust_note: undefined,\r\n          });\r\n          self.index_adjust++;\r\n        })\r\n        .catch(function(err) {\r\n          console.log(err);\r\n        });\r\n    },\r\n  },\r\n  created() {\r\n    this.material_code_search = this.$route.query.material_code;\r\n    this.getByMaterialCode();\r\n    this.getMaterialimport();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.MDS_exchequer_adjust_suppiles {\r\n  .ant-table {\r\n    img {\r\n      width: 120px;\r\n      width: 120px;\r\n    }\r\n    th {\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n    }\r\n    td {\r\n      vertical-align: middle !important;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}