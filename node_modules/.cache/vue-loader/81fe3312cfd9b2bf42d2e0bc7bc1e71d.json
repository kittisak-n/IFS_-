{"remainingRequest":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\src\\views\\MDS\\MDS_exchequer\\MDS_exchequer.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\src\\views\\MDS\\MDS_exchequer\\MDS_exchequer.vue","mtime":1616052285148},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5NRFNfZXhjaGVxdWVyIHsNCiAgLnRleHQtaGVhZCB7DQogICAgZm9udC1zaXplOiAxMzUlOw0KICAgIGZvbnQtd2VpZ2h0OiA2MDA7DQogIH0NCiAgLnRleHQtbnVtYmVyIHsNCiAgICBmb250LXNpemU6IDEzNSU7DQogICAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgfQ0KDQogIC5idG4tbWFyZ2lfdHdvIHsNCiAgICAuYW50LWJ0biB7DQogICAgICBtYXJnaW4tcmlnaHQ6IDElOw0KICAgIH0NCiAgfQ0KICAuYW50LXRhYmxlIHsNCiAgICBpbWcgew0KICAgICAgd2lkdGg6IDEyMHB4Ow0KICAgICAgd2lkdGg6IDEyMHB4Ow0KICAgIH0NCiAgICB0aCB7DQogICAgICBmb250LXNpemU6IDE2cHg7DQogICAgICBmb250LXdlaWdodDogNjAwOw0KICAgIH0NCiAgICB0ZCB7DQogICAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wOw0KICAgIH0NCiAgfQ0KDQogIC5sYWJlbCB7DQogICAgZm9udC1zaXplOiAxNnB4Ow0KICAgIGZvbnQtd2VpZ2h0OiA1MDA7DQogIH0NCn0NCi5hbnQtdXBsb2FkIHsNCiAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsNCiAgaGVpZ2h0OiAzMDlweCAhaW1wb3J0YW50Ow0KICBpbWcgew0KICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7DQogICAgaGVpZ2h0OiAzMDlweCAhaW1wb3J0YW50Ow0KICB9DQp9DQo="},{"version":3,"sources":["MDS_exchequer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAq4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MDS_exchequer.vue","sourceRoot":"src/views/MDS/MDS_exchequer","sourcesContent":["<template>\r\n  <div class=\"MDS_exchequer\">\r\n    <a-row :gutter=\"[8, 8]\">\r\n      <a-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xxl=\"4\">\r\n        <a-card>\r\n          <a-row>\r\n            <a-col :span=\"5\">\r\n              <a-icon\r\n                type=\"database\"\r\n                :style=\"{\r\n                  fontSize: '580%',\r\n                  color: '#1890ff',\r\n                }\"\r\n              />\r\n            </a-col>\r\n            <a-col :span=\"19\" style=\"text-align:end\">\r\n              <div class=\"text-head\">วัสดุทังหมด</div>\r\n              <div>\r\n                <span class=\"text-number \">\r\n                  {{ this.material_report.total }}\r\n                </span>\r\n                รายการ\r\n              </div>\r\n              <div>วัสดุทั้งหมดที่มีในคลัง</div>\r\n            </a-col>\r\n          </a-row>\r\n        </a-card>\r\n      </a-col>\r\n      <a-col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"12\" :xxl=\"5\">\r\n        <a-card>\r\n          <a-row :gutter=\"[8, 8]\">\r\n            <a-col :span=\"5\">\r\n              <a-icon\r\n                type=\"check-circle\"\r\n                :style=\"{\r\n                  fontSize: '550%',\r\n                  color: '#28a745',\r\n                }\"\r\n              />\r\n            </a-col>\r\n            <a-col :span=\"19\" style=\"text-align:end\">\r\n              <div class=\"text-head\">รายการวัสดุที่เบิกได้</div>\r\n              <div>\r\n                <span class=\"text-number \">\r\n                  {{ this.material_report.reveal + \" \" }}\r\n                </span>\r\n                รายการ\r\n              </div>\r\n              <div>รายการวัสดุที่สามารถเบิกได้</div>\r\n            </a-col>\r\n          </a-row>\r\n        </a-card>\r\n      </a-col>\r\n      <a-col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"12\" :xxl=\"5\">\r\n        <a-card>\r\n          <a-row :gutter=\"[8, 8]\">\r\n            <a-col :span=\"5\">\r\n              <a-icon\r\n                type=\"close-circle\"\r\n                :style=\"{\r\n                  fontSize: '550%',\r\n                }\"\r\n              />\r\n            </a-col>\r\n            <a-col :span=\"19\" style=\"text-align:end\">\r\n              <div class=\"text-head\">รายการวัสดุที่งดเบิก</div>\r\n              <div>\r\n                <span class=\"text-number \">\r\n                  {{ this.material_report.unreveal }}\r\n                </span>\r\n                รายการ\r\n              </div>\r\n              <div>รายการวัสดุที่ไม่สามารถเบิกได้</div>\r\n            </a-col>\r\n          </a-row>\r\n        </a-card>\r\n      </a-col>\r\n      <a-col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"12\" :xxl=\"5\">\r\n        <a-card>\r\n          <a-row>\r\n            <a-col :span=\"4\">\r\n              <a-icon\r\n                type=\"warning\"\r\n                :style=\"{\r\n                  fontSize: '580%',\r\n                  color: '#f0b95a',\r\n                }\"\r\n              />\r\n            </a-col>\r\n            <a-col :span=\"20\" style=\"text-align:end\">\r\n              <div class=\"text-head\">รายการวัสดุใกล้หมดคลัง</div>\r\n              <div>\r\n                <span class=\"text-number \">\r\n                  {{ this.material_report.depleted }}\r\n                </span>\r\n                รายการ\r\n              </div>\r\n              <div>วัสดุที่คงเหลือน้อยกว่าค่าต่ำสุด</div>\r\n            </a-col>\r\n          </a-row>\r\n        </a-card>\r\n      </a-col>\r\n      <a-col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"12\" :xxl=\"5\">\r\n        <a-card>\r\n          <a-row>\r\n            <a-col :span=\"4\">\r\n              <a-icon\r\n                type=\"stop\"\r\n                :style=\"{\r\n                  fontSize: '580%',\r\n                  color: '#ff4d4f',\r\n                }\"\r\n              />\r\n            </a-col>\r\n            <a-col :span=\"20\" style=\"text-align:end\">\r\n              <div class=\"text-head\">รายการวัสดุหมดคลัง</div>\r\n              <div>\r\n                <span class=\"text-number \">\r\n                  {{ this.material_report.undepleted }}\r\n                </span>\r\n                รายการ\r\n              </div>\r\n              <div>รายการวัสดุที่คงเหลือเป็น 0</div>\r\n            </a-col>\r\n          </a-row>\r\n        </a-card>\r\n      </a-col>\r\n    </a-row>\r\n    <a-row :gutter=\"[8, 8]\">\r\n      <a-col :xs=\"24\" :sm=\"24\" :md=\"24\" :lg=\"24\" :xxl=\"24\">\r\n        <a-card size=\"small\">\r\n          <a-row :gutter=\"[8, 8]\">\r\n            <a-col :span=\"20\" style=\"margin: 0.2em 0px;\">\r\n              <a-card-meta title=\"รายการวัสดุ/อุปกรณ์ : ปี 2563\">\r\n                <a-icon\r\n                  slot=\"avatar\"\r\n                  type=\"folder-open\"\r\n                  :style=\"{\r\n                    fontSize: '150%',\r\n                  }\"\r\n                />\r\n              </a-card-meta>\r\n            </a-col>\r\n            <a-col :span=\"4\" :style=\"{ textAlign: 'right' }\">\r\n              <a-tooltip placement=\"top\">\r\n                <template slot=\"title\">\r\n                  <span>ส่งออกไฟล์ PDF</span>\r\n                </template>\r\n                <a-button\r\n                  type=\"danger\"\r\n                  icon=\"file-pdf\"\r\n                  :style=\"{ marginRight: '3%' }\"\r\n                  @click=\"exportPDF()\"\r\n                />\r\n              </a-tooltip>\r\n              <a-button\r\n                type=\"primary\"\r\n                icon=\"plus\"\r\n                @click=\"insertAndupdatematerial()\"\r\n              >\r\n                เพิ่มรายการวัสดุ\r\n              </a-button>\r\n            </a-col>\r\n          </a-row>\r\n          <hr style=\"width:100%\" />\r\n          <a-row :gutter=\"[8, 8]\" type=\"flex\" justify=\"end\">\r\n            <a-col :span=\"3\" style=\"text-align:end\">\r\n              <a-select\r\n                :default-value=\"0\"\r\n                style=\"width: 100%\"\r\n                v-model=\"status_search\"\r\n                @change=\"changeCondition()\"\r\n              >\r\n                <a-select-option :value=\"0\">\r\n                  วัสดุทั้งหมด\r\n                </a-select-option>\r\n                <a-select-option :value=\"1\">\r\n                  วัสดุที่สามารถเบิกได้\r\n                </a-select-option>\r\n                <a-select-option :value=\"2\">\r\n                  วัสดุงดเบิก\r\n                </a-select-option>\r\n                <a-select-option :value=\"3\">\r\n                  วัสดุใกล้หมดสต๊อก\r\n                </a-select-option>\r\n                <a-select-option :value=\"4\">\r\n                  วัสดุหมดสต๊อก\r\n                </a-select-option>\r\n              </a-select>\r\n            </a-col>\r\n            <a-col :span=\"5\" style=\"text-align:end\">\r\n              <a-input-search\r\n                placeholder=\"ค้นหาตามรหัส หรือ ชื่อวัสดุ\"\r\n                style=\"width: 100%\"\r\n                v-model=\"text_search\"\r\n                v-on:keyup.enter=\"changeCondition()\"\r\n              />\r\n            </a-col>\r\n          </a-row>\r\n          <a-row :gutter=\"[8, 8]\">\r\n            <a-col :span=\"24\">\r\n              <a-table\r\n                :columns=\"material_columns\"\r\n                :data-source=\"material_record\"\r\n                :pagination=\"false\"\r\n                size=\"small\"\r\n                bordered\r\n              >\r\n                <span slot=\"key\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center' }\">{{ text }}</div>\r\n                </span>\r\n                <span slot=\"material_image\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center', marginTop: '10%' }\">\r\n                    <img :src=\"text\" alt=\"\" />\r\n                  </div>\r\n                </span>\r\n                <span slot=\"material_code\" slot-scope=\"text, record\">\r\n                  <div :style=\"{ textAlign: 'left', fontSize: '16px' }\">\r\n                    <b>หมายเลขวัสดุ : </b> {{ record.material_code }}\r\n                  </div>\r\n                  <div :style=\"{ textAlign: 'left', fontSize: '16px' }\">\r\n                    <b>ชื่อวัสดุ : </b> {{ record.material_name }}\r\n                  </div>\r\n                  <div :style=\"{ textAlign: 'left', fontSize: '16px' }\">\r\n                    <b>หมวดหมู่ : </b>\r\n                    {{ record.material_catergory }}\r\n                  </div>\r\n                  <div :style=\"{ textAlign: 'left', fontSize: '16px' }\">\r\n                    <b>จำนวนขั้นต่ำ : </b> {{ record.material_minimun }}\r\n                  </div>\r\n                  <div :style=\"{ textAlign: 'left', fontSize: '16px' }\">\r\n                    <b>หน่วยนับ : </b> {{ record.material_unit }}\r\n                  </div>\r\n                  <div :style=\"{ textAlign: 'left', fontSize: '16px' }\">\r\n                    <b>สถานะ : </b>\r\n                    <span>\r\n                      <a-tag\r\n                        v-for=\"tag in record.material_status\"\r\n                        :key=\"tag\"\r\n                        :color=\"\r\n                          tag.status === 1\r\n                            ? '#28a745'\r\n                            : tag.status === 2\r\n                            ? ''\r\n                            : tag.status === 3\r\n                            ? '#f0b95a'\r\n                            : '#ff4d4f'\r\n                        \"\r\n                      >\r\n                        {{ tag.tag }}\r\n                      </a-tag>\r\n                    </span>\r\n                  </div>\r\n                  <br />\r\n                  <div :style=\"{ textAlign: 'left', fontSize: '16px' }\">\r\n                    <a-button\r\n                      type=\"warning\"\r\n                      icon=\"edit\"\r\n                      @click=\"insertAndupdatematerial(record.material_id)\"\r\n                    >\r\n                      แก้ไขข้อมูลวัสดุ\r\n                    </a-button>\r\n                    <router-link\r\n                      :to=\"{\r\n                        path:\r\n                          '/MDS_exchequer/MDS_exchequer_adjust_material?material_code=' +\r\n                          record.material_code,\r\n                      }\"\r\n                    >\r\n                      <a-button type=\"info\" icon=\"block\">\r\n                        ปรับยอดคงเหลือวัสดุ\r\n                      </a-button>\r\n                    </router-link>\r\n                  </div>\r\n                </span>\r\n                <span slot=\"material_import\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center', fontSize: '16px' }\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"material_export\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center', fontSize: '16px' }\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"material_adjust\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center', fontSize: '16px' }\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"material_balance\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center', fontSize: '16px' }\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n              </a-table>\r\n            </a-col>\r\n          </a-row>\r\n          <br />\r\n          <a-row>\r\n            <a-col :span=\"15\">\r\n              <p\r\n                :style=\"{ margin: '0.3em 0.5%' }\"\r\n                v-if=\"this.total_search != 0\"\r\n              >\r\n                {{ this.start_search }} -\r\n                {{\r\n                  this.end_search > this.total_search\r\n                    ? this.total_search\r\n                    : this.end_search\r\n                }}\r\n                จาก {{ this.total_search }} รายการ\r\n              </p>\r\n              <p\r\n                :style=\"{ margin: '0.3em 0.5%' }\"\r\n                v-if=\"this.total_search == 0\"\r\n              >\r\n                ไม่พบรายการที่ค้นหา\r\n              </p>\r\n            </a-col>\r\n            <a-col :span=\"9\" :style=\"{ textAlign: 'Right' }\">\r\n              แสดงทีละ\r\n              <a-select\r\n                default-value=\"10\"\r\n                v-model=\"PageSize\"\r\n                :style=\"{ width: '60px', marginRight: '1%' }\"\r\n              >\r\n                <a-select-option value=\"10\">\r\n                  10\r\n                </a-select-option>\r\n                <a-select-option value=\"25\">\r\n                  25\r\n                </a-select-option>\r\n                <a-select-option value=\"50\">\r\n                  50\r\n                </a-select-option>\r\n                <a-select-option value=\"100\">\r\n                  100\r\n                </a-select-option>\r\n              </a-select>\r\n\r\n              <a-pagination\r\n                :style=\"{ display: 'inline' }\"\r\n                v-model=\"current\"\r\n                :total=\"total_search\"\r\n                :page-size=\"PageSize\"\r\n                @change=\"changePageTable(current)\"\r\n              />\r\n            </a-col>\r\n          </a-row>\r\n        </a-card>\r\n      </a-col>\r\n    </a-row>\r\n    <a-modal\r\n      name=\"insert_and_edit_material\"\r\n      width=\"800px\"\r\n      centered\r\n      v-model=\"materialModal\"\r\n      :title=\"title_modal_edit\"\r\n    >\r\n      <a-row :gutter=\"[24, 16]\">\r\n        <a-col :span=\"11\">\r\n          <a-upload\r\n            name=\"avatar\"\r\n            list-type=\"picture-card\"\r\n            class=\"avatar-uploader\"\r\n            :show-upload-list=\"false\"\r\n            action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\r\n            :before-upload=\"beforeUpload\"\r\n            @change=\"uploadimage\"\r\n          >\r\n            <img\r\n              v-if=\"material.material_image\"\r\n              :src=\"material.material_image\"\r\n              alt=\"avatar\"\r\n            />\r\n            <div style=\"width:auto\" v-else>\r\n              <a-icon :type=\"loading ? 'loading' : 'plus'\" />\r\n              <div class=\"ant-upload-text\">\r\n                เลือกรูปวัสดุ\r\n              </div>\r\n            </div>\r\n          </a-upload>\r\n        </a-col>\r\n        <a-col :span=\"13\">\r\n          <a-row :gutter=\"[8, 8]\">\r\n            <a-col :span=\"24\" class=\"label\">\r\n              ชื่อวัสดุ\r\n            </a-col>\r\n            <a-col :span=\"24\">\r\n              <a-input\r\n                width=\"100%\"\r\n                placeholder=\"ชื่อวัสดุ\"\r\n                v-model=\"material.material_name\"\r\n              />\r\n            </a-col>\r\n            <a-col :span=\"24\" class=\"label\">\r\n              หมวดหมู่วัสดุ\r\n            </a-col>\r\n            <a-col :span=\"24\">\r\n              <a-select\r\n                v-model=\"material.material_type\"\r\n                style=\"width: 100%\"\r\n                :disabled=\"this.material_id == null ? disabled : ''\"\r\n              >\r\n                <a-select-option :value=\"null\" disabled>\r\n                  โปรดเลือกหมวดหมู่วัสดุ\r\n                </a-select-option>\r\n                <a-select-option\r\n                  v-for=\"item in this.type\"\r\n                  :key=\"item.key\"\r\n                  :value=\"item.type_id\"\r\n                >\r\n                  {{ item.type_name }}\r\n                </a-select-option>\r\n              </a-select>\r\n            </a-col>\r\n            <a-col :span=\"14\" class=\"label\">\r\n              จำนวนขั้นต่ำ\r\n            </a-col>\r\n            <a-col :span=\"10\" class=\"label\">\r\n              หน่วยนับ\r\n            </a-col>\r\n            <a-col :span=\"14\">\r\n              <a-input\r\n                width=\"100%\"\r\n                placeholder=\"ชื่อวัสดุ\"\r\n                type=\"number\"\r\n                min=\"0\"\r\n                v-model=\"material.material_minimum\"\r\n              />\r\n            </a-col>\r\n            <a-col :span=\"10\">\r\n              <a-select v-model=\"material.material_unit\" style=\"width: 100%\">\r\n                <a-select-option :value=\"null\" disabled>\r\n                  โปรดเลือกหน่วยนับวัสดุ\r\n                </a-select-option>\r\n                <a-select-option\r\n                  v-for=\"item in this.unit\"\r\n                  :key=\"item.key\"\r\n                  :value=\"item.unit_id\"\r\n                >\r\n                  {{ item.unit_name }}\r\n                </a-select-option>\r\n              </a-select>\r\n            </a-col>\r\n            <a-col :span=\"24\" class=\"label\">\r\n              สถานะการเบิกจ่าย\r\n            </a-col>\r\n            <a-col :span=\"24\">\r\n              <a-select v-model=\"material.material_status\" style=\"width: 100%\">\r\n                <a-select-option :value=\"1\">\r\n                  เบิกได้\r\n                </a-select-option>\r\n                <a-select-option :value=\"2\">\r\n                  งดเบิก\r\n                </a-select-option>\r\n              </a-select>\r\n            </a-col>\r\n          </a-row>\r\n        </a-col>\r\n      </a-row>\r\n      <template slot=\"footer\">\r\n        <a-row :gutter=\"[8, 8]\">\r\n          <a-col :span=\"12\" :style=\"{ textAlign: 'start' }\">\r\n            <a-button type=\"danger\">\r\n              ยกเลิก\r\n            </a-button>\r\n          </a-col>\r\n          <a-col :span=\"12\">\r\n            <a-button type=\"success\" icon=\"save\" @click=\"savematerial()\">\r\n              บันทึก\r\n            </a-button>\r\n          </a-col>\r\n        </a-row>\r\n      </template>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n<script>\r\nconst axios = require(\"axios\");\r\nimport pdfMake from \"pdfmake\";\r\nimport pdfFonts from \"@/assets/fontsPDF/THSarabunPsk-fonts.js\"; // 1. import custom fonts\r\n\r\nfunction getBase64(img, callback) {\r\n  const reader = new FileReader();\r\n  reader.addEventListener(\"load\", () => callback(reader.result));\r\n  reader.readAsDataURL(img);\r\n}\r\n\r\nexport default {\r\n  name: \"MDS_exchequer\",\r\n  data() {\r\n    return {\r\n      material_report: {\r\n        total: 0,\r\n        reveal: 0,\r\n        unreveal: 0,\r\n        depleted: 0,\r\n        undepleted: 0,\r\n      },\r\n      start_search: 1,\r\n      end_search: 10,\r\n      PageSize: 10,\r\n      total_search: 0,\r\n      current: 1,\r\n      text_search: \"\",\r\n      condition: \"\",\r\n      status_search: 0,\r\n      title_modal_edit: \"\",\r\n      material_columns: [\r\n        {\r\n          title: \"#\",\r\n          dataIndex: \"key\",\r\n          key: \"key\",\r\n          width: \"2%\",\r\n          scopedSlots: {\r\n            customRender: \"key\",\r\n          },\r\n          type: \"flex\",\r\n          align: \"top\",\r\n        },\r\n        {\r\n          title: \"รูปภาพ\",\r\n          dataIndex: \"material_image\",\r\n          key: \"material_image\",\r\n          width: \"5%\",\r\n          scopedSlots: {\r\n            customRender: \"material_image\",\r\n          },\r\n        },\r\n        {\r\n          title: \"รายการ\",\r\n          dataIndex: \"material_code\",\r\n          key: \"material_code\",\r\n          width: \"15%\",\r\n          scopedSlots: {\r\n            customRender: \"material_code\",\r\n          },\r\n        },\r\n        {\r\n          title: \"จำนวนวัสดุ\",\r\n          children: [\r\n            {\r\n              title: \"นำเข้า\",\r\n              dataIndex: \"material_import\",\r\n              key: \"material_import\",\r\n              width: \"5%\",\r\n              scopedSlots: { customRender: \"material_import\" },\r\n            },\r\n            {\r\n              title: \"เบิกจ่าย\",\r\n              dataIndex: \"material_export\",\r\n              key: \"material_export\",\r\n              width: \"5%\",\r\n              scopedSlots: { customRender: \"material_export\" },\r\n            },\r\n            {\r\n              title: \"ปรับยอด\",\r\n              dataIndex: \"material_adjust\",\r\n              key: \"material_adjust\",\r\n              width: \"5%\",\r\n              scopedSlots: { customRender: \"material_adjust\" },\r\n            },\r\n            {\r\n              title: \"คงเหลือ\",\r\n              dataIndex: \"material_balance\",\r\n              key: \"material_balance\",\r\n              width: \"5%\",\r\n              scopedSlots: { customRender: \"material_balance\" },\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n      material_record: [],\r\n      material_id: null,\r\n\r\n      //สำหรัชการเพิ่มหรืออัพเดตวัสดุ\r\n      unit: [],\r\n      type: [],\r\n      material: {},\r\n      materialModal: false,\r\n      data_store: [],\r\n    };\r\n  },\r\n  methods: {\r\n    genDate(date) {\r\n      const month = [\r\n        \"มกราคม\",\r\n        \"กุมพาพันธ์\",\r\n        \"มีนาคม\",\r\n        \"เมษายน\",\r\n        \"พฤษภาคม\",\r\n        \"มิถุนายน\",\r\n        \"กรกฎาคม\",\r\n        \"สิงหาคม\",\r\n        \"กันยายน\",\r\n        \"ตุลาคม\",\r\n        \"พฤศจิกายน\",\r\n        \"ธันวาคม\",\r\n      ];\r\n      let dateThai = new Date(date).toISOString().split(\"T\")[0];\r\n      dateThai = `${dateThai.split(\"-\")[2]} ${\r\n        month[parseInt(dateThai.split(\"-\")[1]) - 1]\r\n      } ${parseInt(dateThai.split(\"-\")[0]) + 543}`;\r\n      return dateThai;\r\n    },\r\n    getMaterialReport() {\r\n      const self = this;\r\n      axios\r\n        .post(self.$store.state.url + \"/materialRouters/getMaterialTotal\")\r\n        .then(function(res) {\r\n          self.material_report = res.data.results[0];\r\n        });\r\n    },\r\n    getCondition() {\r\n      const self = this;\r\n      self.condition = \"\";\r\n      self.condition +=\r\n        'where (mt.material_code LIKE \"%' +\r\n        self.text_search +\r\n        '%\" or mt.material_name LIKE \"%' +\r\n        self.text_search +\r\n        '%\")';\r\n      if (this.status_search != 0) {\r\n        if (this.status_search == 1 || this.status_search == 2) {\r\n          self.condition += \"and mt.material_status = \" + this.status_search;\r\n        } else if (this.status_search == 3) {\r\n          self.condition +=\r\n            \"\\n and mt.material_balance < mt.material_minimun and mt.material_balance != 0\";\r\n        } else {\r\n          self.condition += \"\\n and mt.material_balance = 0\";\r\n        }\r\n      }\r\n    },\r\n    getMaterialRecord() {\r\n      const self = this;\r\n      self.getCondition();\r\n      axios\r\n        .post(self.$store.state.url + \"/materialRouters/getRecordMaterial\", {\r\n          condition: self.condition,\r\n        })\r\n        .then(function(response) {\r\n          console.log(response);\r\n          self.total_search = response.data.results[0].total_Row;\r\n          // const data = response.data;\r\n          self.getMaterialByCondition();\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    getMaterialByCondition() {\r\n      const self = this;\r\n      self.getCondition();\r\n      self.material_record = [];\r\n      axios\r\n        .post(\r\n          self.$store.state.url + \"/materialRouters/getMaterialByCondition\",\r\n          {\r\n            condition: self.condition,\r\n            start: self.start_search,\r\n            end: self.end_search,\r\n          }\r\n        )\r\n        .then(function(response) {\r\n          console.log(response);\r\n          const data = response.data;\r\n          self.generateMaterial(data.results);\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    generateMaterial(Material) {\r\n      const self = this;\r\n      Material.forEach(function(ele) {\r\n        let materail = {\r\n          key: ele.num,\r\n          material_id: ele.material_id,\r\n          material_image: ele.material_image,\r\n          material_code: ele.material_code,\r\n          material_name: ele.material_name,\r\n          material_catergory: ele.type_name,\r\n          material_unit: ele.unit_name,\r\n          material_status: [\r\n            {\r\n              status: ele.material_status,\r\n              tag: ele.material_status_tag,\r\n            },\r\n          ],\r\n          material_minimun: ele.material_minimun,\r\n          material_import: ele.material_import,\r\n          material_export: ele.material_export,\r\n          material_adjust: ele.material_adjust,\r\n          material_balance: ele.material_balance,\r\n        };\r\n\r\n        if (ele.material_balance == 0) {\r\n          let status_tag = {\r\n            status: 4,\r\n            tag: \"วัสดุหมดคลัง\",\r\n          };\r\n          materail.material_status.push(status_tag);\r\n        } else if (ele.material_balance < ele.material_minimun) {\r\n          let status_tag = {\r\n            status: 3,\r\n            tag: \"วัสดุใกล้หมดคลัง\",\r\n          };\r\n          materail.material_status.push(status_tag);\r\n        }\r\n        self.material_record.push(materail);\r\n      });\r\n    },\r\n    changePageTable(current) {\r\n      console.log(current);\r\n      const self = this;\r\n      self.start_search = self.PageSize * (current - 1) + 1;\r\n      self.end_search = self.PageSize * (current - 1) + parseInt(self.PageSize);\r\n      console.log(self.start_search);\r\n      console.log(self.end_search);\r\n      self.getMaterialByCondition();\r\n    },\r\n    changeCondition() {\r\n      const self = this;\r\n      self.start_search = 1;\r\n      self.end_search = self.PageSize;\r\n      self.getMaterialRecord();\r\n    },\r\n    getUnitMaterial() {\r\n      const self = this;\r\n      axios\r\n        .post(self.$store.state.url + \"/unitRouters/getAllUnit\")\r\n        .then(function(res) {\r\n          console.log(res);\r\n          res.data.results.forEach(function(ele, index) {\r\n            let eleUnit = {\r\n              key: index + 1,\r\n              unit_id: ele.unit_id,\r\n              unit_name: ele.unit_name,\r\n            };\r\n            self.unit.push(eleUnit);\r\n          });\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    getTypeMaterial() {\r\n      const self = this;\r\n      axios\r\n        .post(self.$store.state.url + \"/typeRouters/getAlltype\")\r\n        .then(function(res) {\r\n          console.log(res);\r\n          res.data.results.forEach(function(ele, index) {\r\n            let eleUnit = {\r\n              key: index + 1,\r\n              type_id: ele.type_id,\r\n              type_name: ele.type_name,\r\n            };\r\n            self.type.push(eleUnit);\r\n          });\r\n          console.log(self.type);\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    beforeUpload(file) {\r\n      const isJpgOrPng =\r\n        file.type === \"image/jpeg\" || file.type === \"image/png\";\r\n      if (!isJpgOrPng) {\r\n        this.$message.error(\"You can only upload JPG file!\");\r\n      }\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n      if (!isLt2M) {\r\n        this.$message.error(\"Image must smaller than 2MB!\");\r\n      }\r\n      return isJpgOrPng && isLt2M;\r\n    },\r\n    uploadimage(info) {\r\n      if (info.file.status === \"uploading\") {\r\n        this.loading = true;\r\n        return;\r\n      }\r\n      if (info.file.status === \"done\") {\r\n        // Get this url from response in real world.\r\n        getBase64(info.file.originFileObj, (imageUrl) => {\r\n          this.material.material_image = imageUrl;\r\n          this.loading = false;\r\n        });\r\n      }\r\n    },\r\n    savematerial() {\r\n      console.log(this.material);\r\n      if (this.material_id == null) {\r\n        this.insertMaterial();\r\n      } else {\r\n        this.updateMaterial();\r\n      }\r\n      this.materialModal = false;\r\n    },\r\n    insertAndupdatematerial(material_id = null) {\r\n      if (material_id == null) {\r\n        this.material_id = null;\r\n        let data = {\r\n          material_image: null,\r\n          material_name: null,\r\n          material_type: null,\r\n          material_unit: null,\r\n          material_minimum: 0,\r\n          material_status: 1,\r\n        };\r\n        this.material = data;\r\n        this.title_modal_edit = \"เพิ่มรายการวัสดุ\";\r\n      } else {\r\n        this.material_id = material_id;\r\n        this.title_modal_edit = \"แก้ไขรายการวัสดุ\";\r\n\r\n        let obj = this.material_record.find(\r\n          (item) => item.material_id === material_id\r\n        );\r\n        console.log(obj);\r\n        let data = {\r\n          material_id: material_id,\r\n          material_image: obj.material_image,\r\n          material_name: obj.material_name,\r\n          material_type: this.type.find(\r\n            (item) => item.type_name === obj.material_catergory\r\n          ).type_id,\r\n          material_unit: this.unit.find(\r\n            (item) => item.unit_name === obj.material_unit\r\n          ).unit_id,\r\n          material_minimum: obj.material_minimun,\r\n          material_status: obj.material_status[0].status,\r\n        };\r\n        this.material = data;\r\n      }\r\n      this.materialModal = true;\r\n    },\r\n    insertMaterial() {\r\n      const self = this;\r\n      axios\r\n        .post(\r\n          self.$store.state.url + \"/materialRouters/insertMaterial\",\r\n          self.material\r\n        )\r\n        .then(function(res) {\r\n          console.log(res);\r\n          self.$notification[\"success\"]({\r\n            message: \"เพิ่มข้อมูลวัสดุเสร็จสิ้น\",\r\n            duration: 2,\r\n          });\r\n          self.getMaterialReport();\r\n          self.getMaterialRecord();\r\n        })\r\n        .catch(function(err) {\r\n          console.log(err);\r\n          self.$notification[\"error\"]({\r\n            message: \"เพิ่มข้อมูลวัสดุไม่สำเร็จ\",\r\n            duration: 2,\r\n          });\r\n        });\r\n    },\r\n    updateMaterial() {\r\n      const self = this;\r\n      axios\r\n        .post(\r\n          self.$store.state.url + \"/materialRouters/updateMaterial\",\r\n          self.material\r\n        )\r\n        .then(function(res) {\r\n          console.log(res);\r\n          self.$notification[\"success\"]({\r\n            message: \"แก้ไขข้อมูลวัสดุเสร็จสิ้น\",\r\n            duration: 2,\r\n          });\r\n          self.getMaterialReport();\r\n          self.getMaterialRecord();\r\n          self.material_id = null;\r\n        })\r\n        .catch(function(err) {\r\n          console.log(err);\r\n          self.$notification[\"error\"]({\r\n            message: \"เพิ่มข้อมูลวัสดุไม่สำเร็จ\",\r\n            duration: 2,\r\n          });\r\n        });\r\n    },\r\n    exportPDF() {\r\n      let self = this;\r\n      axios\r\n        .post(self.$store.state.url + \"/materialRouters/getMt\")\r\n        .then(function(res) {\r\n          res.data.results.forEach(function(ele, index) {\r\n            self.data_store.push({\r\n              number: index + 1,\r\n              serial_number: ele.material_code,\r\n              name_product: ele.material_name,\r\n              catagories: ele.type_name,\r\n              import: ele.material_import,\r\n              export: ele.material_export,\r\n              change: ele.material_adjust,\r\n              total: ele.material_balance,\r\n            });\r\n          });\r\n          var headers = {\r\n            column1: {\r\n              col_1: { text: \"ลำดับ\", style: \"tableheader\", rowSpan: 2 },\r\n              col_2: { text: \"หมายเลขวัสดุ\", style: \"tableheader\", rowSpan: 2 },\r\n              col_3: { text: \"ชื่อวัสดุ\", style: \"tableheader\", rowSpan: 2 },\r\n              col_4: { text: \"หมวดหมู่\", style: \"tableheader\", rowSpan: 2 },\r\n              col_5: { text: \"จำนวนวัสดุ\", style: \"tableheader\", colSpan: 4 },\r\n              col_6: {\r\n                rowSpan: undefined,\r\n                _maxWidth: 0,\r\n                _minWidth: 0,\r\n                _span: true,\r\n              },\r\n              col_7: {\r\n                rowSpan: undefined,\r\n                _maxWidth: 0,\r\n                _minWidth: 0,\r\n                _span: true,\r\n              },\r\n              col_8: {\r\n                rowSpan: undefined,\r\n                _maxWidth: 0,\r\n                _minWidth: 0,\r\n                _span: true,\r\n              },\r\n            },\r\n            column2: {\r\n              col_1: {\r\n                _span: true,\r\n                _minWidth: 0,\r\n                _maxWidth: 0,\r\n                _columnEndingContext: {\r\n                  page: 0,\r\n                  x: 5,\r\n                  y: 16.200000000000003,\r\n                  availableHeight: null,\r\n                  availableWidth: 30,\r\n                  lastColumnWidth: 30,\r\n                },\r\n                _rowSpanCurrentOffset: 1,\r\n              },\r\n              col_2: {\r\n                _span: true,\r\n                _minWidth: 0,\r\n                _maxWidth: 0,\r\n                _columnEndingContext: {\r\n                  page: 0,\r\n                  x: 5,\r\n                  y: 16.200000000000003,\r\n                  availableHeight: null,\r\n                  availableWidth: 30,\r\n                  lastColumnWidth: 30,\r\n                },\r\n                _rowSpanCurrentOffset: 1,\r\n              },\r\n              col_3: {\r\n                _span: true,\r\n                _minWidth: 0,\r\n                _maxWidth: 0,\r\n                _columnEndingContext: {\r\n                  page: 0,\r\n                  x: 5,\r\n                  y: 16.200000000000003,\r\n                  availableHeight: null,\r\n                  availableWidth: 30,\r\n                  lastColumnWidth: 30,\r\n                },\r\n                _rowSpanCurrentOffset: 1,\r\n              },\r\n              col_4: {\r\n                _span: true,\r\n                _minWidth: 0,\r\n                _maxWidth: 0,\r\n                _columnEndingContext: {\r\n                  page: 0,\r\n                  x: 5,\r\n                  y: 16.200000000000003,\r\n                  availableHeight: null,\r\n                  availableWidth: 30,\r\n                  lastColumnWidth: 30,\r\n                },\r\n                _rowSpanCurrentOffset: 1,\r\n              },\r\n              col_5: { text: \"นำเข้า\", style: \"tableheader\" },\r\n              col_6: { text: \"เบิกจ่าย\", style: \"tableheader\" },\r\n              col_7: { text: \"ปรับยอด\", style: \"tableheader\" },\r\n              col_8: { text: \"คงเหลือ\", style: \"tableheader\" },\r\n            },\r\n          };\r\n\r\n          var body = [];\r\n\r\n          for (var item in headers) {\r\n            var header = headers[item];\r\n            var row = new Array();\r\n            row.push(header.col_1);\r\n            row.push(header.col_2);\r\n            row.push(header.col_3);\r\n            row.push(header.col_4);\r\n            row.push(header.col_5);\r\n            row.push(header.col_6);\r\n            row.push(header.col_7);\r\n            row.push(header.col_8);\r\n            body.push(row);\r\n          }\r\n\r\n          for (var key in self.data_store) {\r\n            var data = self.data_store[key];\r\n            var newrow = new Array();\r\n            newrow.push(data.number.toString());\r\n            newrow.push(data.serial_number.toString());\r\n            newrow.push(data.name_product.toString());\r\n            newrow.push(data.catagories.toString());\r\n            newrow.push(data.import.toString());\r\n            newrow.push(data.export.toString());\r\n            newrow.push(data.change.toString());\r\n            newrow.push(data.total.toString());\r\n            body.push(newrow);\r\n          }\r\n          console.log(\"Body\", body);\r\n\r\n          pdfMake.vfs = pdfFonts.pdfMake.vfs; // 2. set vfs pdf font\r\n          pdfMake.fonts = {\r\n            THSarabunPsk: {\r\n              normal: \"THSarabun.ttf\",\r\n              bold: \"THSarabun-Bold.ttf\",\r\n              italics: \"THSarabu-Italic.ttf\",\r\n              bolditalics: \"THSarabun-Bold-Italic.ttf\",\r\n            },\r\n          };\r\n          var docDefinition = {\r\n            pageSize: \"A4\",\r\n            content: [\r\n              {\r\n                text: \"ใบรายการวัสดุ\",\r\n                style: \"header\",\r\n              },\r\n              {\r\n                text: \"วันที่ \" + self.genDate(new Date()),\r\n                style: \"date\",\r\n              },\r\n              {\r\n                text: \"\",\r\n                style: \"date\",\r\n              },\r\n              {\r\n                table: {\r\n                  widths: [30, \"*\", \"*\", \"*\", \"*\", \"*\", \"*\", \"*\"],\r\n                  heights: [\"*\", \"*\", \"*\", \"*\", \"*\", \"*\", \"*\", \"*\"],\r\n                  body: body,\r\n                },\r\n              },\r\n            ],\r\n            // footer: function(currentPage, pageCount) {\r\n            //   return currentPage.toString() + \" of \" + pageCount;\r\n            // },\r\n            defaultStyle: {\r\n              font: \"THSarabunPsk\",\r\n            },\r\n            styles: {\r\n              tableheader: {\r\n                bold: true,\r\n                alignment: \"center\",\r\n              },\r\n              header: {\r\n                fontSize: 28,\r\n                bold: true,\r\n                alignment: \"center\",\r\n              },\r\n              date: {\r\n                fontSize: 16,\r\n                bold: false,\r\n                alignment: \"right\",\r\n              },\r\n            },\r\n          };\r\n          self.data_store = [];\r\n          pdfMake.createPdf(docDefinition).open({}, window.open());\r\n        });\r\n    },\r\n  },\r\n  created() {\r\n    this.getMaterialReport();\r\n    this.getMaterialRecord();\r\n    this.getUnitMaterial();\r\n    this.getTypeMaterial();\r\n  },\r\n  // data() {\r\n  //   return {\r\n  //     current: 1,\r\n  //     total: 10,\r\n\r\n  //     material_total: 0,\r\n  //     Reveal: 0,\r\n  //     unReveal: 0,\r\n  //     //out of stock\r\n  //     ofs: 0,\r\n  //     uofs: 0,\r\n\r\n  //     status_search: 0,\r\n  //     text_search: \"\",\r\n  //     material_columns: [\r\n  //       {\r\n  //         title: \"#\",\r\n  //         dataIndex: \"material_id\",\r\n  //         key: \"material_id\",\r\n  //         width: \"2%\",\r\n  //         scopedSlots: {\r\n  //           customRender: \"material_id\",\r\n  //         },\r\n  //         type: \"flex\",\r\n  //         align: \"top\",\r\n  //       },\r\n  //       {\r\n  //         title: \"รูปภาพ\",\r\n  //         dataIndex: \"material_image\",\r\n  //         key: \"material_image\",\r\n  //         width: \"5%\",\r\n  //         scopedSlots: {\r\n  //           customRender: \"material_image\",\r\n  //         },\r\n  //       },\r\n  //       {\r\n  //         title: \"รายการ\",\r\n  //         dataIndex: \"material_code\",\r\n  //         key: \"material_code\",\r\n  //         width: \"15%\",\r\n  //         scopedSlots: {\r\n  //           customRender: \"material_code\",\r\n  //         },\r\n  //       },\r\n  //       {\r\n  //         title: \"จำนวนวัสดุ\",\r\n  //         children: [\r\n  //           {\r\n  //             title: \"นำเข้า\",\r\n  //             dataIndex: \"material_import\",\r\n  //             key: \"material_import\",\r\n  //             width: \"5%\",\r\n  //             scopedSlots: { customRender: \"material_import\" },\r\n  //           },\r\n  //           {\r\n  //             title: \"เบิกจ่าย\",\r\n  //             dataIndex: \"material_export\",\r\n  //             key: \"material_export\",\r\n  //             width: \"5%\",\r\n  //             scopedSlots: { customRender: \"material_export\" },\r\n  //           },\r\n  //           {\r\n  //             title: \"ปรับยอด\",\r\n  //             dataIndex: \"material_adjust\",\r\n  //             key: \"material_adjust\",\r\n  //             width: \"5%\",\r\n  //             scopedSlots: { customRender: \"material_adjust\" },\r\n  //           },\r\n  //           {\r\n  //             title: \"คงเหลือ\",\r\n  //             dataIndex: \"material_balance\",\r\n  //             key: \"material_balance\",\r\n  //             width: \"5%\",\r\n  //             scopedSlots: { customRender: \"material_balance\" },\r\n  //           },\r\n  //         ],\r\n  //       },\r\n  //     ],\r\n\r\n  //     material_record: [],\r\n  //     title_modal_edit: \"\",\r\n  //     material: {},\r\n  //     material_insert: false,\r\n  //     visible: false,\r\n  //     loading: false,\r\n  //     imageUrl: \"\",\r\n  //     unit: [\r\n  //       {\r\n  //         key: 1,\r\n  //         text: \"รีม\",\r\n  //       },\r\n  //       {\r\n  //         key: 2,\r\n  //         text: \"ด้าม\",\r\n  //       },\r\n  //       {\r\n  //         key: 3,\r\n  //         text: \"ม้วน\",\r\n  //       },\r\n  //       {\r\n  //         key: 4,\r\n  //         text: \"กล่อง\",\r\n  //       },\r\n  //     ],\r\n  //     catergory: [\r\n  //       {\r\n  //         key: 1,\r\n  //         text: \"อุปกรณ์สำนักงาน\",\r\n  //       },\r\n  //       {\r\n  //         key: 2,\r\n  //         text: \"อุปกรณ์ทั่วไป\",\r\n  //       },\r\n  //     ],\r\n  //     columns_material_detail: [\r\n  //       {\r\n  //         title: \"#\",\r\n  //         dataIndex: \"index\",\r\n  //         key: \"index\",\r\n  //         width: \"2%\",\r\n  //         scopedSlots: {\r\n  //           customRender: \"index\",\r\n  //         },\r\n  //       },\r\n  //       {\r\n  //         title: \"วันที่รายการ\",\r\n  //         dataIndex: \"material_detail_date\",\r\n  //         key: \"material_detail_date\",\r\n  //         width: \"7%\",\r\n  //         scopedSlots: {\r\n  //           customRender: \"material_detail_date\",\r\n  //         },\r\n  //       },\r\n  //       {\r\n  //         title: \"ประเภท\",\r\n  //         dataIndex: \"material_detail_type\",\r\n  //         key: \"material_detail_type\",\r\n  //         width: \"7%\",\r\n  //         scopedSlots: {\r\n  //           customRender: \"material_detail_type\",\r\n  //         },\r\n  //       },\r\n  //       {\r\n  //         title: \"จำนวน\",\r\n  //         dataIndex: \"material_detail_amount\",\r\n  //         key: \"material_detail_amount\",\r\n  //         width: \"7%\",\r\n  //         scopedSlots: {\r\n  //           customRender: \"material_detail_amount\",\r\n  //         },\r\n  //       },\r\n  //       {\r\n  //         title: \"คงเหลือ\",\r\n  //         dataIndex: \"material_detail_balance\",\r\n  //         key: \"material_detail_balance\",\r\n  //         width: \"7%\",\r\n  //         scopedSlots: {\r\n  //           customRender: \"material_detail_balance\",\r\n  //         },\r\n  //       },\r\n  //       {\r\n  //         title: \"หมายเหตุ\",\r\n  //         dataIndex: \"material_detail_note\",\r\n  //         key: \"material_detail_note\",\r\n  //         width: \"10%\",\r\n  //         scopedSlots: {\r\n  //           customRender: \"material_detail_note\",\r\n  //         },\r\n  //       },\r\n  //     ],\r\n  //     material_detail: [\r\n  //       {\r\n  //         key: 1,\r\n  //         material_detail_date: \"10 ธันวาคม 2563\",\r\n  //         material_detail_type: \"เบิกจ่าย\",\r\n  //         material_detail_amount: 25,\r\n  //         material_detail_balance: 65,\r\n  //         material_detail_note: \"\",\r\n  //       },\r\n  //       {\r\n  //         key: 2,\r\n  //         material_detail_date: \"5 ธันวาคม 2563\",\r\n  //         material_detail_type: \"ปรับยอด\",\r\n  //         material_detail_amount: 10,\r\n  //         material_detail_balance: 90,\r\n  //         material_detail_note: \"วัสดุชำรุด/เสียหาย\",\r\n  //       },\r\n  //       {\r\n  //         key: 3,\r\n  //         material_detail_date: \"3 ธันวาคม 2563\",\r\n  //         material_detail_type: \"นำเข้า\",\r\n  //         material_detail_amount: 50,\r\n  //         material_detail_balance: 100,\r\n  //         material_detail_note: \"\",\r\n  //       },\r\n  //       {\r\n  //         key: 3,\r\n  //         material_detail_date: \"1 ธันวาคม 2563\",\r\n  //         material_detail_type: \"นำเข้า\",\r\n  //         material_detail_amount: 50,\r\n  //         material_detail_balance: 50,\r\n  //         material_detail_note: \"\",\r\n  //       },\r\n  //     ],\r\n  //   };\r\n  // },\r\n  // methods: {\r\n  //   getMeterial() {\r\n  //     const self = this;\r\n  //     self.material_record = [];\r\n  //     axios\r\n  //       .post(self.$store.state.url + \"/materialRouters/getMaterialAll\")\r\n  //       .then(function(response) {\r\n  //         const data = response.data;\r\n  //         console.log(data);\r\n  //         self.material_total = data.results.length;\r\n  //         self.generateMaterial(data.results);\r\n  //         data.results.forEach(function(ele) {\r\n  //           ele.material_status == 1 ? self.Reveal++ : self.unReveal++;\r\n  //           ele.material_balance == 0\r\n  //             ? self.uofs++\r\n  //             : ele.material_balance < ele.material_minimun\r\n  //             ? self.ofs++\r\n  //             : \"\";\r\n  //         });\r\n  //       })\r\n  //       .catch(function(error) {\r\n  //         console.log(error);\r\n  //       });\r\n  //   },\r\n  //   getMeterialByCondition() {\r\n  //     const self = this;\r\n  //     self.material_record = [];\r\n  //     let condition = \"\";\r\n  //     condition +=\r\n  //       'where (mt.material_code LIKE \"%' +\r\n  //       this.text_search +\r\n  //       '%\" or mt.material_name LIKE \"%' +\r\n  //       this.text_search +\r\n  //       '%\")';\r\n\r\n  //     if (this.status_search != 0) {\r\n  //       if (this.status_search == 1 || this.status_search == 2) {\r\n  //         condition += \"and mt.material_status = \" + this.status_search;\r\n  //       } else if (this.status_search == 3) {\r\n  //         condition +=\r\n  //           \"\\n and mt.material_balance < mt.material_minimun and mt.material_balance != 0\";\r\n  //       } else {\r\n  //         condition += \"\\n and mt.material_balance = 0\";\r\n  //       }\r\n  //     }\r\n\r\n  //     axios\r\n  //       .post(\r\n  //         self.$store.state.url + \"/materialRouters/getMaterialByCondition\",\r\n  //         {\r\n  //           condition: condition,\r\n  //         }\r\n  //       )\r\n  //       .then(function(response) {\r\n  //         const data = response.data;\r\n  //         self.generateMaterial(data.results);\r\n  //       })\r\n  //       .catch(function(error) {\r\n  //         console.log(error);\r\n  //       });\r\n  //   },\r\n  //   generateMaterial(Material) {\r\n  //     const self = this;\r\n  //     Material.forEach(function(ele, index) {\r\n  //       let materail = {\r\n  //         key: index,\r\n  //         material_id: ele.material_id,\r\n  //         material_image: ele.material_image,\r\n  //         material_code: ele.material_code,\r\n  //         material_name: ele.material_name,\r\n  //         material_catergory: ele.type_name,\r\n  //         material_unit: ele.unit_name,\r\n  //         material_status: [\r\n  //           {\r\n  //             status: ele.material_status,\r\n  //             tag: ele.material_status_tag,\r\n  //           },\r\n  //         ],\r\n  //         material_minimun: ele.material_minimun,\r\n  //         material_import: ele.material_import,\r\n  //         material_export: ele.material_export,\r\n  //         material_adjust: ele.material_adjust,\r\n  //         material_balance: ele.material_balance,\r\n  //       };\r\n\r\n  //       if (ele.material_balance == 0) {\r\n  //         let status_tag = {\r\n  //           status: 4,\r\n  //           tag: \"วัสดุหมดคลัง\",\r\n  //         };\r\n  //         materail.material_status.push(status_tag);\r\n  //       } else if (ele.material_balance < ele.material_minimun) {\r\n  //         let status_tag = {\r\n  //           status: 3,\r\n  //           tag: \"วัสดุใกล้หมดคลัง\",\r\n  //         };\r\n  //         materail.material_status.push(status_tag);\r\n  //       }\r\n\r\n  //       self.material_record.push(materail);\r\n  //     });\r\n  //     console.log(self.material_record);\r\n  //   },\r\n\r\n  //   canclematerial() {\r\n  //     this.material_insert = false;\r\n  //   },\r\n\r\n  // created() {\r\n  //   this.getMeterialByCondition();\r\n  // },\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n.MDS_exchequer {\r\n  .text-head {\r\n    font-size: 135%;\r\n    font-weight: 600;\r\n  }\r\n  .text-number {\r\n    font-size: 135%;\r\n    font-weight: 600;\r\n  }\r\n\r\n  .btn-margi_two {\r\n    .ant-btn {\r\n      margin-right: 1%;\r\n    }\r\n  }\r\n  .ant-table {\r\n    img {\r\n      width: 120px;\r\n      width: 120px;\r\n    }\r\n    th {\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n    }\r\n    td {\r\n      vertical-align: top;\r\n    }\r\n  }\r\n\r\n  .label {\r\n    font-size: 16px;\r\n    font-weight: 500;\r\n  }\r\n}\r\n.ant-upload {\r\n  width: 100% !important;\r\n  height: 309px !important;\r\n  img {\r\n    width: 100% !important;\r\n    height: 309px !important;\r\n  }\r\n}\r\n</style>\r\n"]}]}