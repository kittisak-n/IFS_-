{"remainingRequest":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\src\\views\\MDS\\MDS_disbursement\\MDS_disbursement_form.vue?vue&type=style&index=0&id=18b1eb7e&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\src\\views\\MDS\\MDS_disbursement\\MDS_disbursement_form.vue","mtime":1616052285147},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouc3RlcHMtY29udGVudCB7DQogIG1hcmdpbi10b3A6IDE2cHg7DQogIGJvcmRlcjogMXB4IGRhc2hlZCAjZTllOWU5Ow0KICBib3JkZXItcmFkaXVzOiA2cHg7DQogIG1pbi1oZWlnaHQ6IDIwMHB4Ow0KICBwYWRkaW5nOiAyMHB4Ow0KfQ0KDQouc3RlcHMtYWN0aW9uIHsNCiAgbWFyZ2luLXRvcDogMjRweDsNCiAgdGV4dC1hbGlnbjogZW5kOw0KfQ0K"},{"version":3,"sources":["MDS_disbursement_form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiVA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"MDS_disbursement_form.vue","sourceRoot":"src/views/MDS/MDS_disbursement","sourcesContent":["<template>\r\n  <div id=\"reveal_form\">\r\n    <a-row :gutter=\"[8, 8]\" type=\"flex\" justify=\"center\">\r\n      <a-col :span=\"24\">\r\n        <a-card size=\"small\" title=\"ใบเบิกวัสดุ\">\r\n          <a-row :gutter=\"[8, 8]\" type=\"flex\" justify=\"center\">\r\n            <a-col :span=\"24\">หมายเหตุการเบิกวัสดุ </a-col>\r\n            <a-col :span=\"24\"\r\n              ><a-input\r\n                v-model=\"material.material_note\"\r\n                placeholder=\"วัตถุประสงค์การเบิกวัสดุ\"\r\n              />\r\n            </a-col>\r\n          </a-row>\r\n          <br />\r\n          <a-row :gutter=\"[8, 8]\" type=\"flex\" justify=\"center\">\r\n            <a-col :span=\"24\"> รายการเบิกวัสดุ</a-col>\r\n          </a-row>\r\n          <a-row :gutter=\"[8, 8]\" type=\"flex\" justify=\"center\">\r\n            <a-col :span=\"24\">\r\n              <a-table\r\n                :columns=\"columns_material\"\r\n                :data-source=\"material.material_list\"\r\n                :pagination=\"false\"\r\n                size=\"small\"\r\n                bordered\r\n              >\r\n                <span slot=\"key\" slot-scope=\"text, record, index\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{ index + 1 }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"material_name\" slot-scope=\"text, record, index\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    <a-select\r\n                      show-search\r\n                      v-model=\"material.material_list[index].material_id\"\r\n                      placeholder=\"ชื่อวัสดุ\"\r\n                      option-filter-prop=\"children\"\r\n                      style=\"width: 100%\"\r\n                      :filter-option=\"filterOptionMaterial\"\r\n                    >\r\n                      <a-select-option\r\n                        v-for=\"item in optionMaterial\"\r\n                        :key=\"item.key\"\r\n                        :value=\"item.material_id\"\r\n                        :disabled=\"\r\n                          material.material_list.find(\r\n                            (ele) => ele.material_id == item.material_id\r\n                          ) || item.material_balance == 0\r\n                        \"\r\n                      >\r\n                        {{ item.material_name }}\r\n                      </a-select-option>\r\n                    </a-select>\r\n                  </div>\r\n                </span>\r\n                <span slot=\"material_unit\" slot-scope=\"text, record, index\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{\r\n                      optionMaterial.findIndex(\r\n                        (ele) =>\r\n                          ele.material_id ===\r\n                          material.material_list[index].material_id\r\n                      ) != -1\r\n                        ? optionMaterial[\r\n                            optionMaterial.findIndex(\r\n                              (ele) =>\r\n                                ele.material_id ===\r\n                                material.material_list[index].material_id\r\n                            )\r\n                          ].material_unit\r\n                        : \"\"\r\n                    }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"material_balance\" slot-scope=\"text, record, index\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{\r\n                      optionMaterial.findIndex(\r\n                        (ele) =>\r\n                          ele.material_id ===\r\n                          material.material_list[index].material_id\r\n                      ) != -1\r\n                        ? optionMaterial[\r\n                            optionMaterial.findIndex(\r\n                              (ele) =>\r\n                                ele.material_id ===\r\n                                material.material_list[index].material_id\r\n                            )\r\n                          ].material_balance\r\n                        : \"\"\r\n                    }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"material_reveal\" slot-scope=\"text, record, index\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    <a-input-number\r\n                      style=\"width: 100%\"\r\n                      v-model=\"material.material_list[index].material_reveal\"\r\n                      :min=\"1\"\r\n                      :max=\"\r\n                        optionMaterial.findIndex(\r\n                          (ele) =>\r\n                            ele.material_id ===\r\n                            material.material_list[index].material_id\r\n                        ) != -1\r\n                          ? optionMaterial[\r\n                              optionMaterial.findIndex(\r\n                                (ele) =>\r\n                                  ele.material_id ===\r\n                                  material.material_list[index].material_id\r\n                              )\r\n                            ].material_balance\r\n                          : 1\r\n                      \"\r\n                      placeholder=\"จำนวนวัสดุที่ต้องการเบิก\"\r\n                    />\r\n                  </div>\r\n                </span>\r\n\r\n                <span slot=\"material_note\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    <a-input placeholder=\"ระบุหมายเหตุการเบิก\" />\r\n                  </div>\r\n                </span>\r\n\r\n                <span slot=\"action\" slot-scope=\"text, record, index\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    <a-tooltip placement=\"top\">\r\n                      <template slot=\"title\">\r\n                        <span>ลบข้อมูลวัสดุ</span>\r\n                      </template>\r\n                      <a-button\r\n                        :disabled=\"material.material_list.length == 1\"\r\n                        type=\"danger\"\r\n                        icon=\"close\"\r\n                        @click=\"deleteRecordmaterial(index)\"\r\n                      >\r\n                      </a-button>\r\n                    </a-tooltip>\r\n                  </div>\r\n                </span>\r\n              </a-table>\r\n            </a-col>\r\n          </a-row>\r\n          <a-row :gutter=\"[8, 8]\" type=\"flex\" justify=\"center\">\r\n            <a-col :span=\"24\">\r\n              <a-button\r\n                type=\"dashed\"\r\n                style=\"width:100%\"\r\n                icon=\"plus\"\r\n                @click=\"addRecordmaterial()\"\r\n                >เพิ่มรายการข้อมูล\r\n              </a-button>\r\n            </a-col>\r\n          </a-row>\r\n\r\n          <template slot=\"actions\" class=\"ant-card-actions\">\r\n            <a-row :gutter=\"[8, 8]\" type=\"flex\" justify=\"center\">\r\n              <a-col :span=\"12\" style=\"text-align:start\">\r\n                <a-button\r\n                  style=\"width:25%;margin:0px 1.5%\"\r\n                  icon=\"line\"\r\n                  @click=\"cancleConfirm()\"\r\n                  >กลับ\r\n                </a-button>\r\n              </a-col>\r\n              <a-col :span=\"12\" style=\"text-align:end\">\r\n                <a-button\r\n                  type=\"success\"\r\n                  style=\"width:25%;margin:0px 1.5%\"\r\n                  icon=\"save\"\r\n                  @click=\"SaveMaterial()\"\r\n                  >บันทึกการเพิ่มข้อมูล\r\n                </a-button>\r\n              </a-col>\r\n            </a-row>\r\n          </template>\r\n        </a-card>\r\n      </a-col>\r\n    </a-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"reveal_form\",\r\n  data() {\r\n    return {\r\n      columns_material: [\r\n        {\r\n          title: \"ลำดับ\",\r\n          dataIndex: \"key\",\r\n          key: \"key\",\r\n          width: \"5%\",\r\n          scopedSlots: {\r\n            customRender: \"key\",\r\n          },\r\n        },\r\n        {\r\n          title: \"วัสดุ\",\r\n          dataIndex: \"material_name\",\r\n          key: \"material_name\",\r\n          width: \"15%\",\r\n          scopedSlots: {\r\n            customRender: \"material_name\",\r\n          },\r\n        },\r\n        {\r\n          title: \"หน่วย\",\r\n          dataIndex: \"material_unit\",\r\n          key: \"material_unit\",\r\n          width: \"10%\",\r\n          scopedSlots: {\r\n            customRender: \"material_unit\",\r\n          },\r\n        },\r\n        {\r\n          title: \"จำนวนวัสดุ\",\r\n          children: [\r\n            {\r\n              title: \"จำนวนคงเหลือ\",\r\n              dataIndex: \"material_balance\",\r\n              key: \"material_balance\",\r\n              width: \"10%\",\r\n              scopedSlots: { customRender: \"material_balance\" },\r\n            },\r\n            {\r\n              title: \"จำนวนเบิก\",\r\n              dataIndex: \"material_reveal\",\r\n              key: \"material_reveal\",\r\n              width: \"10%\",\r\n              scopedSlots: { customRender: \"material_reveal\" },\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          title: \"หมายเหตุ\",\r\n          dataIndex: \"material_note\",\r\n          key: \"material_note\",\r\n          width: \"10%\",\r\n          scopedSlots: {\r\n            customRender: \"material_note\",\r\n          },\r\n        },\r\n        {\r\n          title: \"\",\r\n          dataIndex: \"action\",\r\n          key: \"action\",\r\n          width: \"5%\",\r\n          scopedSlots: { customRender: \"action\" },\r\n        },\r\n      ],\r\n      material: {\r\n        material_note: undefined,\r\n        material_list: [\r\n          {\r\n            key: 1,\r\n            material_id: undefined,\r\n            material_reveal: 1,\r\n            material_note: undefined,\r\n          },\r\n        ],\r\n        requisition_create_by: this.$store.state.user.user_id,\r\n      },\r\n      keymaterial_list: 2,\r\n      optionMaterial: [],\r\n    };\r\n  },\r\n  methods: {\r\n    addRecordmaterial() {\r\n      this.material.material_list.push({\r\n        key: this.keymaterial_list,\r\n        material_id: undefined,\r\n        material_reveal: 1,\r\n        material_note: undefined,\r\n      });\r\n      this.keymaterial_list++;\r\n    },\r\n    getMaterial() {\r\n      const self = this;\r\n      axios\r\n        .post(self.$store.state.url + \"/materialRouters/getMaterialOption\")\r\n        .then(function(res) {\r\n          console.log(res);\r\n          const data = res.data.results;\r\n          self.optionMaterial = [];\r\n          data.forEach(function(ele, index) {\r\n            self.optionMaterial.push({\r\n              key: index + 1,\r\n              material_id: ele.material_id,\r\n              material_name: ele.material_name,\r\n              material_unit: ele.unit_name,\r\n              material_balance: ele.material_balance,\r\n            });\r\n          });\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    filterOptionMaterial(input, option) {\r\n      return (\r\n        option.componentOptions.children[0].text\r\n          .toLowerCase()\r\n          .indexOf(input.toLowerCase()) >= 0\r\n      );\r\n    },\r\n    deleteRecordmaterial(index) {\r\n      this.material.material_list.splice(index, 1);\r\n    },\r\n    SaveMaterial() {\r\n      const self = this;\r\n      console.log(self.material);\r\n      axios\r\n        .post(\r\n          self.$store.state.url +\r\n            \"/RequisitionOrderRouters/insertRequisitionOrder\",\r\n          self.material\r\n        )\r\n        .then(function(res) {\r\n          console.log(res);\r\n          self.$router.back();\r\n        })\r\n        .catch(function(err) {\r\n          console.log(err);\r\n        });\r\n    },\r\n  },\r\n  created() {\r\n    this.getMaterial();\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.steps-content {\r\n  margin-top: 16px;\r\n  border: 1px dashed #e9e9e9;\r\n  border-radius: 6px;\r\n  min-height: 200px;\r\n  padding: 20px;\r\n}\r\n\r\n.steps-action {\r\n  margin-top: 24px;\r\n  text-align: end;\r\n}\r\n</style>\r\n"]}]}