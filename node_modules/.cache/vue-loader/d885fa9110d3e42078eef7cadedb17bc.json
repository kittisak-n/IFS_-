{"remainingRequest":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\src\\views\\PMS\\permission_manage.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\src\\views\\PMS\\permission_manage.vue","mtime":1616052285160},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQp0aC5jb2x1bW4tbW9uZXksDQp0ZC5jb2x1bW4tbW9uZXkgew0KICB0ZXh0LWFsaWduOiByaWdodCAhaW1wb3J0YW50Ow0KfQ0KDQojc2V0Q29sb3Igew0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZjYzAwOw0KfQ0K"},{"version":3,"sources":["permission_manage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA81BA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"permission_manage.vue","sourceRoot":"src/views/PMS","sourcesContent":["<template>\r\n  <div id=\"permisson\">\r\n    <a-row :gutter=\"[8, 8]\">\r\n      <a-col :span=\"7\">\r\n        <a-card>\r\n          <a-row>\r\n            <a-col :span=\"4\">\r\n              <a-icon\r\n                type=\"user\"\r\n                :style=\"{\r\n                  fontSize: '580%',\r\n                  color: '#f0b95a',\r\n                }\"\r\n              />\r\n            </a-col>\r\n            <a-col :span=\"20\" style=\"text-align:end\">\r\n              <br />\r\n              <div class=\"text-head\">จำนวนบุคลากรที่มีอยู่ในระบบ</div>\r\n              <div>\r\n                <span class=\"text-number \">{{ numPerson }} </span>คน\r\n              </div>\r\n            </a-col>\r\n          </a-row>\r\n        </a-card>\r\n      </a-col>\r\n    </a-row>\r\n    <a-row :gutter=\"[8, 8]\">\r\n      <a-col :span=\"24\">\r\n        <a-card size=\"small\">\r\n          <a-row :gutter=\"[8, 8]\">\r\n            <a-col :span=\"16\" style=\"margin: 0.2em 0px;\">\r\n              <a-card-meta title=\"รายการผู้มีสิทธิ์การใช้งานระบบ\">\r\n                <a-icon\r\n                  slot=\"avatar\"\r\n                  type=\"folder-open\"\r\n                  :style=\"{\r\n                    fontSize: '150%',\r\n                  }\"\r\n                />\r\n              </a-card-meta>\r\n            </a-col>\r\n\r\n            <a-col :span=\"4\" :style=\"{ textAlign: 'end' }\">\r\n              <router-link :to=\"{ path: '/addposition' }\">\r\n                <a-button type=\"primary\" icon=\"plus\" style=\"width:100%\">\r\n                  เพิ่มสิทธิ์การเข้าถึง\r\n                </a-button>\r\n              </router-link>\r\n            </a-col>\r\n\r\n            <a-col :span=\"4\" :style=\"{ textAlign: 'start' }\">\r\n              <router-link :to=\"{ path: '/permission_manage/adduser' }\">\r\n                <a-button type=\"success\" icon=\"user-add\" style=\"width:100%\">\r\n                  เพิ่มผู้มีสิทธิ์เข้าใช้ระบบ\r\n                </a-button>\r\n              </router-link>\r\n            </a-col>\r\n          </a-row>\r\n          <hr style=\"width:100%\" />\r\n          <br />\r\n          <a-row :gutter=\"[8, 8]\">\r\n            <a-col :span=\"24\">\r\n              <a-table\r\n                :columns=\"columns\"\r\n                :data-source=\"dataPerson\"\r\n                :pagination=\"false\"\r\n                size=\"small\"\r\n              >\r\n                <!-- <span slot=\"name\" slot-scope=\"text, record, index\">\r\n                  <div style=\"text-align:center\">\r\n                    {{ index }}\r\n                    {{ text }}\r\n                    {{ record }}\r\n                  </div> -->\r\n                <span slot=\"key\" slot-scope=\"text\">\r\n                  <div style=\"text-align:center\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"name\" slot-scope=\"text\">\r\n                  <div style=\"margin-left:15%\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n\r\n                <span slot=\"position\" slot-scope=\"text\">\r\n                  <div style=\"text-align:center\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n\r\n                <span slot=\"permission\" slot-scope=\"text\">\r\n                  <div style=\"text-align:center\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n\r\n                <span slot=\"status\" slot-scope=\"text, record, index\">\r\n                  <div style=\"text-align:center\">\r\n                    <a-switch\r\n                      :checked=\"dataPerson[index].status\"\r\n                      @click=\"\r\n                        () =>\r\n                          (dataPerson[index].status = !dataPerson[index].status)\r\n                      \"\r\n                      @change=\"closePersonId(record.person_id)\"\r\n                    >\r\n                      <a-icon slot=\"checkedChildren\" type=\"check\" />\r\n                      <a-icon slot=\"unCheckedChildren\" type=\"close\" />\r\n                    </a-switch>\r\n                  </div>\r\n                </span>\r\n\r\n                <span slot=\"action\" slot-scope=\"record\">\r\n                  <div style=\"text-align:center\">\r\n                    <a-tooltip placement=\"top\" title=\"จัดการสิทธิ์\">\r\n                      <a-button\r\n                        type=\"warning\"\r\n                        @click=\"getPostionAccessById(record.person_id)\"\r\n                        icon=\"edit\"\r\n                      >\r\n                      </a-button>\r\n                    </a-tooltip>\r\n                    <!-- <a-tooltip placement=\"top\" title=\"ปิดการใช้งาน\">\r\n                      <a-button\r\n                        type=\"danger\"\r\n                        icon=\"close\"\r\n                        @click=\"\r\n                          showDeleteConfirm(record.person_id, record.name)\r\n                        \"\r\n                      >\r\n                      </a-button>\r\n                    </a-tooltip> -->\r\n                    <a-tooltip placement=\"top\" title=\"ตรวจสอบข้อมูล\">\r\n                      <a-button\r\n                        type=\"primary\"\r\n                        icon=\"search\"\r\n                        @click=\"getByIdPerson(record.person_id)\"\r\n                      >\r\n                      </a-button>\r\n                    </a-tooltip>\r\n                  </div>\r\n                </span>\r\n              </a-table>\r\n            </a-col>\r\n          </a-row>\r\n          <br />\r\n          <a-row>\r\n            <a-col :span=\"15\">\r\n              <p :style=\"{ margin: '0.3em 0.5%' }\">1-10 จาก 10 รายการ</p>\r\n            </a-col>\r\n            <a-col :span=\"9\" :style=\"{ textAlign: 'Right' }\">\r\n              แสดงทีละ\r\n              <a-select\r\n                default-value=\"10\"\r\n                :style=\"{ width: '60px', marginRight: '1%' }\"\r\n              >\r\n                <a-select-option value=\"10\">\r\n                  10\r\n                </a-select-option>\r\n                <a-select-option value=\"25\">\r\n                  25\r\n                </a-select-option>\r\n                <a-select-option value=\"50\">\r\n                  50\r\n                </a-select-option>\r\n                <a-select-option value=\"100\">\r\n                  100\r\n                </a-select-option>\r\n              </a-select>\r\n\r\n              <a-pagination\r\n                :style=\"{ display: 'inline' }\"\r\n                v-model=\"current\"\r\n                :total=\"total\"\r\n                :page-size=\"10\"\r\n              />\r\n            </a-col>\r\n          </a-row>\r\n        </a-card>\r\n      </a-col>\r\n    </a-row>\r\n\r\n    <!-- modal -->\r\n    <div>\r\n      <a-modal\r\n        v-model=\"visible_manage\"\r\n        title=\"จัดการสิทธิ์\"\r\n        @ok=\"handleOk\"\r\n        cancelText=\"ปิด\"\r\n        okText=\"ยืนยัน\"\r\n        :footer=\"null\"\r\n      >\r\n        <a-table\r\n          :columns=\"columns_modal_manage\"\r\n          :data-source=\"personPositionAccess\"\r\n          size=\"small\"\r\n          :pagination=\"false\"\r\n          bordered\r\n        >\r\n          <!-- <span slot=\"expandedRowRender\" slot-scope=\"record\" style=\"margin: 0\">\r\n            <div v-for=\"(item, index) in record.sub_system\" :key=\"index\">\r\n              <p v-if=\"item.sub_system_name_TH == null\">\r\n                ไม่มีระบบย่อย\r\n              </p>\r\n              <p v-else>\r\n                {{ item.sub_system_name_TH }}\r\n              </p>\r\n            </div>\r\n            \r\n          </span> -->\r\n          <span slot=\"postion_access_name_TH\" slot-scope=\"text, record, index\">\r\n            <div\r\n              v-if=\"index != personPositionAccess.length - 1\"\r\n              style=\"text-align:center\"\r\n            >\r\n              {{ text }}\r\n            </div>\r\n            <div\r\n              v-if=\"index == personPositionAccess.length - 1\"\r\n              style=\"text-align:center\"\r\n            >\r\n              <a-select\r\n                style=\"width:100%\"\r\n                v-model=\"personPositionAccess[index].postion_access_id\"\r\n                placeholder=\"โปรดเลือกสิทธิ์เข้าถึง\"\r\n              >\r\n                <a-select-option\r\n                  v-for=\"item in dataPostionAccess\"\r\n                  :key=\"item.key\"\r\n                  :value=\"item.postion_access_id\"\r\n                  :disabled=\"\r\n                    personPositionAccess.find(\r\n                      (ele) => ele.postion_access_id == item.postion_access_id\r\n                    )\r\n                  \"\r\n                >\r\n                  {{ item.postion_access_name_TH }}\r\n                </a-select-option>\r\n              </a-select>\r\n            </div>\r\n          </span>\r\n          <span slot=\"status_modal\" slot-scope=\"text, record, index\">\r\n            <div\r\n              v-if=\"index != personPositionAccess.length - 1\"\r\n              style=\"text-align:center\"\r\n            >\r\n              <a-switch\r\n                :checked=\"personPositionAccess[index].prepair_status\"\r\n                @click=\"\r\n                  () =>\r\n                    (personPositionAccess[\r\n                      index\r\n                    ].prepair_status = !personPositionAccess[index]\r\n                      .prepair_status)\r\n                \"\r\n                @change=\"changeStatusPositionAccess(record.person_id)\"\r\n              >\r\n                <a-icon slot=\"checkedChildren\" type=\"check\" />\r\n                <a-icon slot=\"unCheckedChildren\" type=\"close\" />\r\n              </a-switch>\r\n            </div>\r\n            <div\r\n              v-if=\"index == personPositionAccess.length - 1\"\r\n              style=\"text-align:center\"\r\n            >\r\n              <a-button\r\n                type=\"success\"\r\n                icon=\"save\"\r\n                @click=\"\r\n                  updatePermission(record.postion_access_id, record.person_id)\r\n                \"\r\n              ></a-button>\r\n            </div>\r\n          </span>\r\n\r\n          <!-- <template slot=\"title\" >\r\n            Header\r\n          </template> -->\r\n          <!-- <template slot=\"footer\" :footer=\"null\">\r\n            Footer\r\n          </template> -->\r\n        </a-table>\r\n\r\n        <!-- <template slot=\"footer\">\r\n          <a-select\r\n            default-value=\"lucy\"\r\n            style=\"width: 120px\"\r\n            @change=\"handleChange\"\r\n          >\r\n            <a-select-option value=\"jack\">\r\n              Jack\r\n            </a-select-option>\r\n          </a-select>\r\n        </template> -->\r\n      </a-modal>\r\n\r\n      <a-modal\r\n        v-model=\"visible_info\"\r\n        title=\"ข้อมูลรายละเอียด\"\r\n        @ok=\"handleOk\"\r\n        :footer=\"null\"\r\n      >\r\n        <a-row :gutter=\"[8, 8]\">\r\n          <a-col :span=\"24\">\r\n            <a-card>\r\n              <a-row :gutter=\"[8, 8]\">\r\n                <a-col :span=\"12\" v-model=\"nameInfo\">\r\n                  <div style=\"text-align:center\">\r\n                    <b>ชื่อ : </b>\r\n                    <span>{{ nameInfo }}</span>\r\n                  </div>\r\n                </a-col>\r\n                <a-col :span=\"12\" v-model=\"lastnameInfo\">\r\n                  <div style=\"text-align:center\">\r\n                    <b>นามสกุล : </b>\r\n                    <span>{{ lastnameInfo }}</span>\r\n                  </div>\r\n                </a-col>\r\n              </a-row>\r\n\r\n              <a-row :gutter=\"[8, 8]\">\r\n                <a-col :span=\"12\" v-model=\"positionInfo\">\r\n                  <div style=\"text-align:center\">\r\n                    <b>ตำแหน่ง : </b>\r\n                    <span>{{ positionInfo }}</span>\r\n                  </div>\r\n                </a-col>\r\n                <a-col :span=\"12\" v-model=\"addressInfo\">\r\n                  <div style=\"text-align:center\">\r\n                    <b>ที่อยู่ : </b>\r\n                    <span>{{ addressInfo }}</span>\r\n                  </div>\r\n                </a-col>\r\n              </a-row>\r\n\r\n              <a-row :gutter=\"[8, 8]\">\r\n                <a-col :span=\"12\" v-model=\"districtInfo\">\r\n                  <div style=\"text-align:center\">\r\n                    <b>ตำบล : </b>\r\n                    <span>{{ districtInfo }}</span>\r\n                  </div>\r\n                </a-col>\r\n                <a-col :span=\"12\" v-model=\"amphurInfo\">\r\n                  <div style=\"text-align:center\">\r\n                    <b>อำเภอ : </b>\r\n                    <span>{{ amphurInfo }}</span>\r\n                  </div>\r\n                </a-col>\r\n              </a-row>\r\n\r\n              <a-row :gutter=\"[8, 8]\">\r\n                <a-col :span=\"12\" v-model=\"provinceInfo\">\r\n                  <div style=\"text-align:center\">\r\n                    <b>จังหวัด : </b>\r\n                    <span>{{ provinceInfo }}</span>\r\n                  </div>\r\n                </a-col>\r\n                <a-col :span=\"12\" v-model=\"zipcodeInfo\">\r\n                  <div style=\"text-align:center\">\r\n                    <b>รหัสไปรษณีย์ : </b>\r\n                    <span>{{ zipcodeInfo }}</span>\r\n                  </div>\r\n                </a-col>\r\n              </a-row>\r\n            </a-card>\r\n          </a-col>\r\n        </a-row>\r\n\r\n        <a-row :gutter=\"[8, 8]\">\r\n          <a-col :span=\"24\">\r\n            <a-card>\r\n              <a-row>\r\n                <a-col :span=\"4\">\r\n                  <a-icon\r\n                    type=\"database\"\r\n                    :style=\"{\r\n                      fontSize: '300%',\r\n                      color: '#000080',\r\n                    }\"\r\n                  />\r\n                </a-col>\r\n                <a-col :span=\"20\" style=\"text-align:end\">\r\n                  <div class=\"text-head\">จำนวนระบบ</div>\r\n                  <div>\r\n                    <span class=\"text-number \">{{ numSystemPermission }} </span\r\n                    >ระบบ\r\n                  </div>\r\n                </a-col>\r\n              </a-row>\r\n            </a-card>\r\n          </a-col>\r\n          <!-- <a-col :span=\"12\">\r\n            <a-card>\r\n              <a-row>\r\n                <a-col :span=\"4\">\r\n                  <a-icon\r\n                    type=\"clock-circle\"\r\n                    :style=\"{\r\n                      fontSize: '300%',\r\n                      color: '#008000',\r\n                    }\"\r\n                  />\r\n                </a-col>\r\n                <a-col :span=\"20\" style=\"text-align:end\">\r\n                  <div class=\"text-head\">จำนวนการเข้าใช้ระบบ</div>\r\n                  <div><span class=\"text-number \">10 </span>จำนวนครั้ง</div>\r\n                </a-col>\r\n              </a-row>\r\n            </a-card>\r\n          </a-col> -->\r\n        </a-row>\r\n\r\n        <a-row :gutter=\"[8, 8]\">\r\n          <a-col>\r\n            <a-table\r\n              :columns=\"columns_modal_info\"\r\n              :data-source=\"personSystem\"\r\n              :pagination=\"false\"\r\n              size=\"small\"\r\n            >\r\n              <span slot=\"key\" slot-scope=\"text\">\r\n                <div style=\"text-align:center\">\r\n                  {{ text }}\r\n                </div>\r\n              </span>\r\n            </a-table>\r\n          </a-col>\r\n        </a-row>\r\n      </a-modal>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nconst axios = require(\"axios\");\r\nconst columns = [\r\n  {\r\n    dataIndex: \"key\",\r\n    key: \"key\",\r\n    title: \"ลำดับ\",\r\n    width: \"10%\",\r\n    scopedSlots: { customRender: \"key\" },\r\n  },\r\n  {\r\n    dataIndex: \"name\",\r\n    key: \"name\",\r\n    title: \"ชื่อ - นามสกุล\",\r\n    width: \"30%\",\r\n    scopedSlots: { customRender: \"name\" },\r\n  },\r\n  {\r\n    title: \"ตำแหน่ง\",\r\n    dataIndex: \"position\",\r\n    width: \"20%\",\r\n    key: \"age\",\r\n    scopedSlots: { customRender: \"position\" },\r\n  },\r\n  // {\r\n  //   title: \"สิทธิ์การเข้าถึง\",\r\n  //   dataIndex: \"permission\",\r\n  //   width: \"20%\",\r\n  //   key: \"\",\r\n  //   scopedSlots: { customRender: \"permission\" },\r\n  // },\r\n\r\n  // {\r\n  //   title: \"ไว้ก่อน\",\r\n  //   dataIndex: \"address\",\r\n  //   width: \"20%\",\r\n  //   key: \"address\",\r\n  //   scopedSlots: { customRender: \"test\" },\r\n  // },\r\n  {\r\n    title: \"สถานะ\",\r\n    key: \"status\",\r\n    dataIndex: \"status\",\r\n    width: \"20%\",\r\n    scopedSlots: { customRender: \"status\" },\r\n  },\r\n  {\r\n    title: \"ดำเนินการ\",\r\n    key: \"action\",\r\n    width: \"20%\",\r\n    scopedSlots: { customRender: \"action\" },\r\n  },\r\n];\r\n\r\nconst columns_modal_manage = [\r\n  {\r\n    title: \"สิทธิ์การใช้งาน\",\r\n    dataIndex: \"postion_access_name_TH\",\r\n    key: \"postion_access_name_TH\",\r\n    scopedSlots: { customRender: \"postion_access_name_TH\" },\r\n  },\r\n  {\r\n    title: \"จัดการ\",\r\n    scopedSlots: { customRender: \"status_modal\" },\r\n  },\r\n];\r\n\r\nconst columns_modal_info = [\r\n  {\r\n    title: \"สิทธิ์การใช้งาน\",\r\n    key: \"key\",\r\n    dataIndex: \"system_name_TH\",\r\n  },\r\n];\r\n\r\n// const data = [\r\n//   {\r\n//     key: \"1\",\r\n//     name: \"ประไพพรรณ สุ่มทรัพย์\",\r\n//     position: \"เจ้าหน้าที่ฝ่ายธุรการ\",\r\n//     address: \"New York No. 1 Lake Park\",\r\n//     tags: [\"nice\", \"developer\"],\r\n//   },\r\n//   {\r\n//     key: \"2\",\r\n//     name: \"นันทิกานต์ คุ้มเพชร\",\r\n//     position: \"เจ้าหน้าที่เบิกวัสดุ\",\r\n//     address: \"London No. 1 Lake Park\",\r\n//     tags: [\"loser\"],\r\n//   },\r\n//   {\r\n//     key: \"3\",\r\n//     name: \"ปุณณานันท์ มีเงินมาก\",\r\n//     position: \"อาจารย์ที่ปรึกษา\",\r\n//     address: \"Sidney No. 1 Lake Park\",\r\n//     tags: [\"cool\", \"teacher\"],\r\n//   },\r\n// ];\r\n\r\n// const dataPerson = [\r\n//   {\r\n//     key: dataPerson.results.person_id,\r\n//     name: dataPerson.person_firstname_TH + \" \" + dataPerson.person_lastname_TH,\r\n//     position: \"เจ้าหน้าที่ฝ่ายธุรการ\",\r\n//     address: \"New York No. 1 Lake Park\",\r\n//     tags: [\"nice\", \"developer\"],\r\n//   },\r\n// ];\r\n\r\nconst data_modal_info = [\r\n  {\r\n    key: \"1\",\r\n    permission_activate: \"ระบบคำนวณภาระงาน\",\r\n  },\r\n  {\r\n    key: \"2\",\r\n    permission_activate: \"ระบบเบิกจ่ายวัสดุ\",\r\n  },\r\n];\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      dataPerson: [],\r\n      personSystem: [],\r\n      personPositionAccess: [],\r\n      dataPostionAccess: [],\r\n      // dataPersonId: {\r\n      //   person_id: \"\",\r\n      //   person_username: \"\",\r\n      //   prefix_id: \"\",\r\n      //   person_firstname_TH: \"\",\r\n      //   person_lastname_TH: \"\",\r\n      //   person_address: \"\",\r\n      //   person_province: \"\",\r\n      //   person_amphur: \"\",\r\n      //   person_district: \"\",\r\n      //   person_position: \"\",\r\n      //   person_status: \"\",\r\n      // },\r\n      // data,\r\n      columns,\r\n      columns_modal_manage,\r\n      data_modal_info,\r\n      columns_modal_info,\r\n      visible_manage: false,\r\n      visible_info: false,\r\n      nameInfo: \"\",\r\n      lastnameInfo: \"\",\r\n      positionInfo: \"\",\r\n      addressInfo: \"\",\r\n      provinceInfo: \"\",\r\n      amphurInfo: \"\",\r\n      districtInfo: \"\",\r\n      zipcodeInfo: \"\",\r\n      nameDeleteFirm: \"\",\r\n      sub_system: \"\",\r\n      numPerson: 0,\r\n      numSystemPermission: 0,\r\n      position_access_index: 1,\r\n    };\r\n  },\r\n  methods: {\r\n    getAllPerson() {\r\n      const self = this;\r\n      self.numPerson = 0;\r\n      axios\r\n        .post(\"http://localhost:8080/personRouters/getAllPerson\")\r\n        .then(function(res) {\r\n          const data = res.data;\r\n          // console.log(data.results);\r\n          data.results.forEach(function(ele, index) {\r\n            self.numPerson += 1;\r\n            let data = {\r\n              key: index + 1,\r\n              person_id: ele.person_id,\r\n              name:\r\n                ele.pf_name_abbr == null\r\n                  ? ele.person_firstname_TH + \" \" + ele.person_lastname_TH\r\n                  : ele.pf_name_abbr +\r\n                    ele.person_firstname_TH +\r\n                    \" \" +\r\n                    ele.person_lastname_TH,\r\n              position: ele.postition_name,\r\n              // permission: ele.person_status,\r\n              status: ele.person_status == 1 ? true : false,\r\n            };\r\n            self.dataPerson.push(data);\r\n          });\r\n          console.log(self.dataPerson);\r\n        });\r\n    },\r\n\r\n    getByIdPerson(id) {\r\n      this.visible_info = true;\r\n      console.log(id);\r\n      const self = this;\r\n      self.numSystemPermission = 0;\r\n      self.personSystem = [];\r\n      axios\r\n        .post(\"http://localhost:8080/personRouters/getByIdPerson\", {\r\n          person_id: id,\r\n        })\r\n        .then(function(res) {\r\n          const data = res.data;\r\n\r\n          if (data.results[0].pf_name_abbr == null) {\r\n            data.results[0].pf_name_abbr = \"\";\r\n          }\r\n\r\n          self.nameInfo =\r\n            data.results[0].pf_name_abbr + data.results[0].person_firstname_TH;\r\n          self.lastnameInfo = data.results[0].person_lastname_TH;\r\n          self.positionInfo = data.results[0].postition_name;\r\n          self.addressInfo = data.results[0].person_address;\r\n          self.provinceInfo = data.results[0].province;\r\n          self.amphurInfo = data.results[0].amphures;\r\n          self.districtInfo = data.results[0].districts;\r\n          self.zipcodeInfo = data.results[0].zipcode;\r\n        });\r\n\r\n      axios\r\n        .post(\"http://localhost:8080/personRouters/getSystemByIdPerson\", {\r\n          person_id: id,\r\n        })\r\n        .then(function(res) {\r\n          const data = res.data;\r\n\r\n          data.results.forEach(function(ele, index) {\r\n            self.numSystemPermission += 1;\r\n            let data = {\r\n              key: index + 1,\r\n              system_name_TH: ele.system_name_TH,\r\n            };\r\n            self.personSystem.push(data);\r\n          });\r\n        });\r\n    },\r\n\r\n    closePersonId(data) {\r\n      const self = this;\r\n      axios\r\n        .post(\"http://localhost:8080/personRouters/closePersonId\", {\r\n          person_id: data,\r\n        })\r\n        .then(function(res) {\r\n          const data = res.data;\r\n          if (data.results) {\r\n            self.$notification[\"success\"]({\r\n              message: \"การแจ้งเตือน\",\r\n              description: \"การเปลี่ยนสถานะสำเร็จ\",\r\n              duration: 3,\r\n            });\r\n          }\r\n        });\r\n    },\r\n    updatePermission(position_access_id_update, person_id_update) {\r\n      console.log(position_access_id_update);\r\n      console.log(person_id_update);\r\n      const self = this;\r\n      axios\r\n        .post(\"http://localhost:8080/personRouters/updatePermission\", {\r\n          position_access_id: position_access_id_update,\r\n          person_id: person_id_update,\r\n        })\r\n        .then(function(res) {\r\n          const data = res.data;\r\n          if (data.results) {\r\n            self.$notification[\"success\"]({\r\n              message: \"การแจ้งเตือน\",\r\n              description: \"การเปลี่ยนสิทธิ์สำเร็จ\",\r\n              duration: 3,\r\n            });\r\n          }\r\n        });\r\n      this.visible_manage = false;\r\n    },\r\n    changeStatusPositionAccess(data) {\r\n      const self = this;\r\n      axios\r\n        .post(\r\n          \"http://localhost:8080/personRouters/changeStatusPositionAccess\",\r\n          {\r\n            person_id: data,\r\n          }\r\n        )\r\n        .then(function(res) {\r\n          const data = res.data;\r\n          if (data.results) {\r\n            self.$notification[\"success\"]({\r\n              message: \"การแจ้งเตือน\",\r\n              description: \"การเปลี่ยนสถานะสำเร็จ\",\r\n              duration: 3,\r\n            });\r\n          }\r\n        });\r\n    },\r\n\r\n    getPostionAccessById(index) {\r\n      this.visible_manage = true;\r\n      const self = this;\r\n      self.personPositionAccess = [];\r\n      axios\r\n        .post(\"http://localhost:8080/personRouters/getPostionAccessById\", {\r\n          person_id: index,\r\n        })\r\n        .then(function(res) {\r\n          const data = res.data;\r\n\r\n          data.results.forEach(function(ele, index) {\r\n            self.personPositionAccess.push({\r\n              key: index + 1,\r\n              postion_access_id: ele.postion_access_id,\r\n              postion_access_name_TH: ele.postion_access_name_TH,\r\n              person_id: ele.person_id,\r\n              prepair_status: ele.prepair_status == 1 ? true : false,\r\n            });\r\n            self.position_access_index++;\r\n          });\r\n          self.personPositionAccess.push({\r\n            key: self.position_access_index,\r\n            postion_access_id: undefined,\r\n            postion_access_name_TH: undefined,\r\n            person_id: index,\r\n            prepair_status: undefined,\r\n          });\r\n          self.position_access_index++;\r\n        });\r\n      // self.getPositionDetail(self.personPositionAccess.postion_access_id);\r\n    },\r\n\r\n    getPositionDetail(index) {\r\n      console.log(index);\r\n      const self = this;\r\n      console.log(self.person.position_access[index].position_access_id);\r\n      axios\r\n        .post(\"http://localhost:8080/personRouters/getPositionName\", {\r\n          position_access_id:\r\n            self.person.position_access[index].position_access_id,\r\n        })\r\n        .then(function(result) {\r\n          console.log(result.data.results);\r\n          self.systemPositionAccess = [];\r\n          result.data.results.forEach(function(res) {\r\n            self.systemPositionAccess.push(res);\r\n          });\r\n        });\r\n    },\r\n\r\n    getPostionAccess() {\r\n      const self = this;\r\n      axios\r\n        .post(\"http://localhost:8080/personRouters/getPostionAccess\")\r\n        .then(function(res) {\r\n          console.log(res.data);\r\n          const data = res.data;\r\n          // console.log(data.results);\r\n          data.results.forEach(function(ele, index) {\r\n            let data = {\r\n              key: index + 1,\r\n              postion_access_id: ele.postion_access_id,\r\n              postion_access_name_TH: ele.postion_access_name_TH,\r\n            };\r\n            self.dataPostionAccess.push(data);\r\n          });\r\n        });\r\n    },\r\n\r\n    // showDeleteConfirm(id, name) {\r\n    //   console.log(id);\r\n\r\n    //   this.$confirm({\r\n    //     title: \"คุณการต้องลบใช่หรือไม่\",\r\n    //     content: name,\r\n    //     okText: \"ยืนยัน\",\r\n    //     okType: \"danger\",\r\n    //     cancelText: \"ยกเลิก\",\r\n    //     onOk() {\r\n    //       console.log(\"OK\");\r\n\r\n    //       axios\r\n    //         .post(\"http://localhost:8080/personRouters/deletePrepair\", {\r\n    //           person_id: id,\r\n    //         })\r\n    //         .then(function(res) {\r\n    //           const data = res.data;\r\n    //           console.log(data.results);\r\n    //         });\r\n\r\n    //       axios\r\n    //         .post(\"http://localhost:8080/personRouters/deletePerson\", {\r\n    //           person_id: id,\r\n    //         })\r\n    //         .then(function(res) {\r\n    //           const data = res.data;\r\n    //           console.log(data.results);\r\n    //           this.getAllPerson();\r\n    //         });\r\n\r\n    //       this.$notification[\"success\"]({\r\n    //         message: \"การแจ้งเตือน\",\r\n    //         description: \"ลบสำเร็จ\",\r\n    //         duration: 3,\r\n    //       });\r\n    //     },\r\n    //     onCancel() {\r\n    //       console.log(\"Cancel\");\r\n    //     },\r\n    //   });\r\n    // },\r\n    handleOk(e) {\r\n      console.log(e);\r\n      this.visible_manage = false;\r\n      this.visible_info = false;\r\n    },\r\n    // test(data) {\r\n    //   console.log(data);\r\n    // },\r\n  },\r\n  created() {\r\n    this.getAllPerson();\r\n    this.getPostionAccess();\r\n    // console.log(this.$store.state.user.user_name);\r\n    // console.log(this.$store.state.user.user_id);\r\n    // console.log(this.$store.state.user_menu);\r\n  },\r\n};\r\n</script>\r\n<style>\r\nth.column-money,\r\ntd.column-money {\r\n  text-align: right !important;\r\n}\r\n\r\n#setColor {\r\n  background-color: #ffcc00;\r\n}\r\n</style>\r\n"]}]}