{"remainingRequest":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\src\\views\\MDS\\MDS_import\\MDS_import.vue?vue&type=style&index=0&lang=scss&scope=true&","dependencies":[{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\src\\views\\MDS\\MDS_import\\MDS_import.vue","mtime":1616052285154},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HIGH\\Desktop\\New_Git_INFS\\INFS_Front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLk1EU19pbXBvcnQgew0KICAudGV4dC1oZWFkIHsNCiAgICBmb250LXNpemU6IDEzNSU7DQogICAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgfQ0KICAudGV4dC1udW1iZXIgew0KICAgIGZvbnQtc2l6ZTogMTM1JTsNCiAgICBmb250LXdlaWdodDogNjAwOw0KICB9DQoNCiAgLmJ0bi1tYXJnaV90d28gew0KICAgIC5hbnQtYnRuIHsNCiAgICAgIG1hcmdpbi1yaWdodDogMSU7DQogICAgfQ0KICB9DQogIC5hbnQtdGFibGUgew0KICAgIGltZyB7DQogICAgICB3aWR0aDogMTIwcHg7DQogICAgICB3aWR0aDogMTIwcHg7DQogICAgfQ0KICAgIHRoIHsNCiAgICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7DQogICAgfQ0KICAgIHRkIHsNCiAgICB9DQogIH0NCg0KICAubGFiZWwgew0KICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICBmb250LXdlaWdodDogNTAwOw0KICB9DQp9DQo="},{"version":3,"sources":["MDS_import.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA60BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"MDS_import.vue","sourceRoot":"src/views/MDS/MDS_import","sourcesContent":["<template>\r\n  <div class=\"MDS_import\">\r\n    <a-row :gutter=\"[8, 8]\">\r\n      <a-col :span=\"14\">\r\n        <a-card>\r\n          <a-row>\r\n            <a-col :span=\"24\">\r\n              <highcharts\r\n                :options=\"chartOptions\"\r\n                ref=\"lineCharts\"\r\n                style=\"position: relative; height:12.7vw; width:auto\"\r\n              ></highcharts>\r\n            </a-col>\r\n          </a-row>\r\n        </a-card>\r\n      </a-col>\r\n      <a-col :span=\"10\">\r\n        <a-row :gutter=\"[8, 8]\">\r\n          <a-col :span=\"24\">\r\n            <a-card>\r\n              <a-row :gutter=\"[8, 8]\">\r\n                <a-col :span=\"4\">\r\n                  <a-icon\r\n                    type=\"file-sync\"\r\n                    :style=\"{\r\n                      fontSize: '550%',\r\n                      color: '#1890ff',\r\n                    }\"\r\n                  />\r\n                </a-col>\r\n                <a-col :span=\"20\" style=\"text-align:end\">\r\n                  <div class=\"text-head\">\r\n                    จำนวนรายการนำเข้าวัสดุทั้งหมด\r\n                  </div>\r\n                  <div>\r\n                    <span class=\"text-number \"> {{ totallist }} </span>รายการ\r\n                  </div>\r\n                  <div>\r\n                    จำนวนรายการนำเข้าวัสดุทั้งหมด ตั้งแต่วันที่\r\n                    {{ genDate(start_date_search) }} ถึง\r\n                    {{ genDate(end_date_search) }}\r\n                  </div>\r\n                </a-col>\r\n              </a-row>\r\n            </a-card>\r\n          </a-col>\r\n          <a-col :span=\"12\">\r\n            <a-card>\r\n              <a-row>\r\n                <a-col :span=\"4\">\r\n                  <a-icon\r\n                    type=\"file-done\"\r\n                    :style=\"{\r\n                      fontSize: '580%',\r\n                      color: '#28a745',\r\n                    }\"\r\n                  />\r\n                </a-col>\r\n                <a-col :span=\"20\" style=\"text-align:end\">\r\n                  <div class=\"text-head\">รายการนำเข้าคงเหลือ</div>\r\n                  <div>\r\n                    <span class=\"text-number \"> {{ totalawait }} </span>รายการ\r\n                  </div>\r\n                  <div>จำนวนรายการนำเข้าสินค้าคงเหลือ</div>\r\n                </a-col>\r\n              </a-row>\r\n            </a-card>\r\n          </a-col>\r\n          <a-col :span=\"12\">\r\n            <a-card>\r\n              <a-row>\r\n                <a-col :span=\"4\">\r\n                  <a-icon\r\n                    type=\"exception\"\r\n                    :style=\"{\r\n                      fontSize: '580%',\r\n                      color: '#ff4d4f',\r\n                    }\"\r\n                  />\r\n                </a-col>\r\n                <a-col :span=\"20\" style=\"text-align:end\">\r\n                  <div class=\"text-head\">รายการนำเข้าหมด</div>\r\n                  <div>\r\n                    <span class=\"text-number \"> {{ totalsucces }} </span>รายการ\r\n                  </div>\r\n                  <div>จำนวนรายการนำเข้าสินค้าหมด</div>\r\n                </a-col>\r\n              </a-row>\r\n            </a-card>\r\n          </a-col></a-row\r\n        >\r\n      </a-col>\r\n    </a-row>\r\n    <a-row :gutter=\"[8, 8]\">\r\n      <a-col :span=\"24\">\r\n        <a-card size=\"small\">\r\n          <a-row :gutter=\"[8, 8]\">\r\n            <a-col :span=\"20\" style=\"margin: 0.2em 0px;\">\r\n              <a-card-meta title=\"รายการนำเข้าวัสดุ\">\r\n                <a-icon\r\n                  slot=\"avatar\"\r\n                  type=\"folder-open\"\r\n                  :style=\"{\r\n                    fontSize: '150%',\r\n                  }\"\r\n                />\r\n              </a-card-meta>\r\n            </a-col>\r\n            <a-col :span=\"4\" :style=\"{ textAlign: 'right' }\">\r\n              <router-link :to=\"{ path: '/MDS_import/MDS_import_form' }\">\r\n                <a-button type=\"primary\" icon=\"plus\">\r\n                  เพิ่มรายการนำเข้าวัสดุ\r\n                </a-button>\r\n              </router-link>\r\n            </a-col>\r\n          </a-row>\r\n          <hr style=\"width:100%\" />\r\n          <a-row :gutter=\"[8, 8]\" type=\"flex\" justify=\"end\">\r\n            <a-col :span=\"3\" style=\"text-align:end\">\r\n              <a-date-picker\r\n                v-model=\"start_date_search\"\r\n                :disabled-date=\"disabledStartDate\"\r\n                :format=\"moment(start_date_search).format('LL')\"\r\n                placeholder=\"วันที่เริ่มต้น\"\r\n                @openChange=\"handleStartOpenChange\"\r\n              />\r\n            </a-col>\r\n            <a-col :span=\"3\">\r\n              <a-date-picker\r\n                v-model=\"end_date_search\"\r\n                :disabled-date=\"disabledEndDate\"\r\n                :format=\"moment(end_date_search).format('LL')\"\r\n                placeholder=\"วันที่สิ้นสุด\"\r\n                :open=\"endOpen\"\r\n                @openChange=\"handleEndOpenChange\"\r\n              />\r\n            </a-col>\r\n            <a-col :span=\"5\" style=\"text-align:end\">\r\n              <a-input-search\r\n                placeholder=\"ค้นหาตามรหัส หรือ ชื่อวัสดุ\"\r\n                style=\"width: 100%\"\r\n                v-model=\"text_search\"\r\n                v-on:keyup.enter=\"changeCondition()\"\r\n              />\r\n            </a-col>\r\n          </a-row>\r\n          <a-row :gutter=\"[8, 8]\">\r\n            <a-col :span=\"24\">\r\n              <a-table\r\n                :columns=\"columns_purchase_order\"\r\n                :data-source=\"purchase_order\"\r\n                :pagination=\"false\"\r\n                size=\"small\"\r\n                bordered\r\n              >\r\n                <span slot=\"key\" slot-scope=\"text, record, index\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{ index + 1 }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"purchase_order_code\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"purchase_order_company\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"purchase_order_date\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"purchase_order_total\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"purchase_order_paymant\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"purchase_order_vat\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"purchase_order_paymant_total\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n                <span slot=\"purchase_order_creator\" slot-scope=\"text\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    {{ text }}\r\n                  </div>\r\n                </span>\r\n\r\n                <span slot=\"action\" slot-scope=\"text, record, index\">\r\n                  <div :style=\"{ textAlign: 'center' }\">\r\n                    <a-tooltip placement=\"top\">\r\n                      <template slot=\"title\">\r\n                        <span>ตรวจสอบรายการ</span>\r\n                      </template>\r\n                      <a-button\r\n                        type=\"primary\"\r\n                        icon=\"search\"\r\n                        @click=\"showModal(index)\"\r\n                      >\r\n                      </a-button>\r\n                    </a-tooltip>\r\n                  </div>\r\n                </span>\r\n              </a-table>\r\n            </a-col>\r\n          </a-row>\r\n          <br />\r\n          <a-row>\r\n            <a-col :span=\"15\">\r\n              <p\r\n                :style=\"{ margin: '0.3em 0.5%' }\"\r\n                v-if=\"this.total_search != 0\"\r\n              >\r\n                {{ this.start_search }} -\r\n                {{\r\n                  this.end_search > this.total_search\r\n                    ? this.total_search\r\n                    : this.end_search\r\n                }}\r\n                จาก {{ this.total_search }} รายการ\r\n              </p>\r\n              <p\r\n                :style=\"{ margin: '0.3em 0.5%' }\"\r\n                v-if=\"this.total_search == 0\"\r\n              >\r\n                ไม่พบรายการที่ค้นหา\r\n              </p>\r\n            </a-col>\r\n            <a-col :span=\"9\" :style=\"{ textAlign: 'Right' }\">\r\n              แสดงทีละ\r\n              <a-select\r\n                default-value=\"10\"\r\n                v-model=\"PageSize\"\r\n                :style=\"{ width: '60px', marginRight: '1%' }\"\r\n              >\r\n                <a-select-option value=\"10\">\r\n                  10\r\n                </a-select-option>\r\n                <a-select-option value=\"25\">\r\n                  25\r\n                </a-select-option>\r\n                <a-select-option value=\"50\">\r\n                  50\r\n                </a-select-option>\r\n                <a-select-option value=\"100\">\r\n                  100\r\n                </a-select-option>\r\n              </a-select>\r\n              <a-pagination\r\n                :style=\"{ display: 'inline' }\"\r\n                v-model=\"current\"\r\n                :total=\"total_search\"\r\n                :page-size=\"PageSize\"\r\n                @change=\"changePageTable(current)\"\r\n              />\r\n            </a-col>\r\n          </a-row>\r\n        </a-card>\r\n      </a-col>\r\n    </a-row>\r\n    <a-modal\r\n      width=\"1200px\"\r\n      :dialog-style=\"{ top: '5%' }\"\r\n      v-model=\"visible\"\r\n      :title=\"\r\n        'รายละเอียดใบรายการนำเข้าวัสดุหมายเลข : ' + purchase.purchase_order_code\r\n      \"\r\n    >\r\n      <a-row :gutter=\"[8, 0]\">\r\n        <a-col :span=\"24\">\r\n          <p><b>หมายเลขใบรายการ</b> : {{ purchase.purchase_order_code }}</p>\r\n        </a-col>\r\n        <a-col :span=\"8\">\r\n          <p><b>วันที่นำเข้าวัสดุ</b> : {{ purchase.purchase_order_date }}</p>\r\n        </a-col>\r\n        <a-col :span=\"8\">\r\n          <p><b>ผู้ตรวจรับ</b> : {{ purchase.purchase_order_creator }}</p>\r\n        </a-col>\r\n        <a-col :span=\"8\">\r\n          <p><b>จำนวน</b> : {{ purchase.purchase_order_total }} รายการ</p>\r\n        </a-col>\r\n        <a-col :span=\"8\">\r\n          <p><b>ยอดชำระ</b> : {{ purchase.purchase_order_paymant }} บาท</p>\r\n        </a-col>\r\n        <a-col :span=\"8\">\r\n          <p><b>ภาษี (7%)</b> : {{ purchase.purchase_order_vat }} บาท</p>\r\n        </a-col>\r\n        <a-col :span=\"8\">\r\n          <p>\r\n            <b>ยอดชำระสุทธิ</b> :{{ purchase.purchase_order_paymant_total }} บาท\r\n          </p>\r\n        </a-col>\r\n      </a-row>\r\n      <a-row :gutter=\"[8, 0]\">\r\n        <a-col :span=\"24\">\r\n          <p><b>ผู้จัดจำหน่าย</b> :{{ purchase.purchase_order_company }}</p>\r\n        </a-col>\r\n      </a-row>\r\n\r\n      <a-row :gutter=\"[8, 8]\">\r\n        <a-col :span=\"24\" style=\"margin: 0.3em 0px;font-size: 100%;\"\r\n          ><b>รายการวัสดุนำเข้า</b>\r\n        </a-col>\r\n      </a-row>\r\n      <a-row :gutter=\"[8, 8]\">\r\n        <a-col :span=\"24\" style=\"text-align:center\">\r\n          <a-table\r\n            :columns=\"columns_order_meterail\"\r\n            :data-source=\"order_meterail\"\r\n            :pagination=\"false\"\r\n            size=\"small\"\r\n            bordered\r\n          >\r\n            <span slot=\"key\" slot-scope=\"text, record, index\">\r\n              <div :style=\"{ textAlign: 'center' }\">\r\n                {{ index + 1 }}\r\n              </div>\r\n            </span>\r\n            <span slot=\"order_meterail_code\" slot-scope=\"text\">\r\n              <div :style=\"{ textAlign: 'center' }\">\r\n                {{ text }}\r\n              </div>\r\n            </span>\r\n            <span slot=\"order_meterail_name\" slot-scope=\"text\">\r\n              <div :style=\"{ textAlign: 'left' }\">\r\n                {{ text }}\r\n              </div>\r\n            </span>\r\n            <span slot=\"order_meterail_amount\" slot-scope=\"text\">\r\n              <div :style=\"{ textAlign: 'center' }\">\r\n                {{ text }}\r\n              </div>\r\n            </span>\r\n            <span slot=\"order_meterail_unit\" slot-scope=\"text\">\r\n              <div :style=\"{ textAlign: 'center' }\">\r\n                {{ text }}\r\n              </div>\r\n            </span>\r\n            <span slot=\"order_meterail_price\" slot-scope=\"text\">\r\n              <div :style=\"{ textAlign: 'center' }\">{{ text }}.00</div>\r\n            </span>\r\n          </a-table>\r\n        </a-col>\r\n      </a-row>\r\n\r\n      <template slot=\"footer\">\r\n        <a-button @click=\"visible = !visible\">\r\n          ปิด\r\n        </a-button>\r\n      </template>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { Chart } from \"highcharts-vue\";\r\nimport Highcharts from \"highcharts\";\r\nimport dataModule from \"highcharts/modules/data\";\r\nimport drilldown from \"highcharts/modules/drilldown\";\r\nimport loadExporting from \"highcharts/modules/exporting\";\r\nimport axios from \"axios\";\r\ndrilldown(Highcharts);\r\ndataModule(Highcharts);\r\nloadExporting(Highcharts);\r\n\r\nimport moment from \"moment\";\r\nimport \"moment/locale/th\";\r\nexport default {\r\n  components: {\r\n    highcharts: Chart,\r\n  },\r\n  data() {\r\n    return {\r\n      start_search: 1,\r\n      end_search: 10,\r\n      PageSize: 10,\r\n      total_search: 0,\r\n      current: 1,\r\n      text_search: \"\",\r\n      condition: \"\",\r\n      status_search: 0,\r\n      start_date_search: new Date(\"2021-01-01\"),\r\n      end_date_search: new Date(),\r\n      totallist: 0,\r\n      totalawait: 0,\r\n      totalsucces: 0,\r\n      moment,\r\n      endOpen: false,\r\n      month: [\r\n        \"ม.ค.\",\r\n        \"ก.พ.\",\r\n        \"มี.ค.\",\r\n        \"เม.ย.\",\r\n        \"พ.ค.\",\r\n        \"มิ.ย.\",\r\n        \"ก.ค.\",\r\n        \"ส.ค.\",\r\n        \"ก.ย.\",\r\n        \"ต.ค.\",\r\n        \"พ.ย.\",\r\n        \"ธ.ค.\",\r\n      ],\r\n      purchase: {},\r\n      chartOptions: {\r\n        chart: {\r\n          type: \"line\",\r\n        },\r\n        title: {\r\n          text: \"จำนวนรายการนำเข้าวัสดุ\",\r\n        },\r\n        subtitle: {\r\n          text: \"ย้อนหลัง 12 เดือนนับจากวันที่ดูข้อมูล\",\r\n        },\r\n        xAxis: {\r\n          categories: [],\r\n        },\r\n        yAxis: {\r\n          title: {\r\n            text: \"จำนวนรายการนำเข้าวัสดุ\",\r\n          },\r\n        },\r\n        plotOptions: {\r\n          line: {\r\n            dataLabels: {\r\n              enabled: true,\r\n            },\r\n            enableMouseTracking: true,\r\n          },\r\n        },\r\n        series: [\r\n          {\r\n            name: \"รายการนำเข้า\",\r\n            data: [],\r\n          },\r\n        ],\r\n      },\r\n      columns_purchase_order: [\r\n        {\r\n          title: \"ลำดับ\",\r\n          dataIndex: \"key\",\r\n          key: \"key\",\r\n          width: \"3%\",\r\n          scopedSlots: {\r\n            customRender: \"key\",\r\n          },\r\n        },\r\n        {\r\n          title: \"หมายเลขใบรายการ\",\r\n          dataIndex: \"purchase_order_code\",\r\n          key: \"purchase_order_code\",\r\n          width: \"5%\",\r\n          scopedSlots: {\r\n            customRender: \"purchase_order_code\",\r\n          },\r\n        },\r\n        {\r\n          title: \"ผู้จัดจำหน่าย\",\r\n          dataIndex: \"purchase_order_company\",\r\n          key: \"purchase_order_company\",\r\n          width: \"10%\",\r\n          scopedSlots: {\r\n            customRender: \"purchase_order_company\",\r\n          },\r\n        },\r\n        {\r\n          title: \"วันที่นำเข้าวัสดุ\",\r\n          dataIndex: \"purchase_order_date\",\r\n          key: \"purchase_order_date\",\r\n          width: \"5%\",\r\n          scopedSlots: {\r\n            customRender: \"purchase_order_date\",\r\n          },\r\n        },\r\n        {\r\n          title: \"จำนวนรายการ\",\r\n          dataIndex: \"purchase_order_total\",\r\n          key: \"purchase_order_total\",\r\n          width: \"5%\",\r\n          scopedSlots: { customRender: \"purchase_order_total\" },\r\n        },\r\n        {\r\n          title: \"ราคา\",\r\n          children: [\r\n            {\r\n              title: \"ยอดชำระ\",\r\n              dataIndex: \"purchase_order_paymant\",\r\n              key: \"purchase_order_paymant\",\r\n              width: \"5%\",\r\n              scopedSlots: { customRender: \"purchase_order_paymant\" },\r\n            },\r\n            {\r\n              title: \"ภาษี (7%)\",\r\n              dataIndex: \"purchase_order_vat\",\r\n              key: \"purchase_order_vat\",\r\n              width: \"5%\",\r\n              scopedSlots: { customRender: \"purchase_order_vat\" },\r\n            },\r\n            {\r\n              title: \"ยอดชำระสุทธิ\",\r\n              dataIndex: \"purchase_order_paymant_total\",\r\n              key: \"purchase_order_paymant_total\",\r\n              width: \"5%\",\r\n              scopedSlots: { customRender: \"purchase_order_paymant_total\" },\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          title: \"ผู้ทำรายการ\",\r\n          dataIndex: \"purchase_order_creator\",\r\n          key: \"purchase_order_creator\",\r\n          width: \"5%\",\r\n          scopedSlots: { customRender: \"purchase_order_creator\" },\r\n        },\r\n        {\r\n          title: \"ตรวจสอบ\",\r\n          dataIndex: \"action\",\r\n          key: \"action\",\r\n          width: \"5%\",\r\n          scopedSlots: {\r\n            customRender: \"action\",\r\n          },\r\n        },\r\n      ],\r\n      purchase_order: [],\r\n      columns_order_meterail: [\r\n        {\r\n          title: \"#\",\r\n          dataIndex: \"key\",\r\n          key: \"key\",\r\n          width: \"3%\",\r\n          scopedSlots: {\r\n            customRender: \"key\",\r\n          },\r\n        },\r\n        {\r\n          title: \"รหัสวัสดุ\",\r\n          dataIndex: \"order_meterail_code\",\r\n          key: \"order_meterail_code\",\r\n          width: \"10%\",\r\n          scopedSlots: {\r\n            customRender: \"order_meterail_code\",\r\n          },\r\n        },\r\n        {\r\n          title: \"รายการวัสดุ\",\r\n          dataIndex: \"order_meterail_name\",\r\n          key: \"order_meterail_name\",\r\n          width: \"15%\",\r\n          scopedSlots: {\r\n            customRender: \"order_meterail_name\",\r\n          },\r\n        },\r\n        {\r\n          title: \"จำนวน\",\r\n          dataIndex: \"order_meterail_amount\",\r\n          key: \"order_meterail_amount\",\r\n          width: \"7%\",\r\n          scopedSlots: {\r\n            customRender: \"order_meterail_amount\",\r\n          },\r\n        },\r\n        {\r\n          title: \"หน่วยนับ\",\r\n          dataIndex: \"order_meterail_unit\",\r\n          key: \"order_meterail_unit\",\r\n          width: \"5%\",\r\n          scopedSlots: {\r\n            customRender: \"order_meterail_unit\",\r\n          },\r\n        },\r\n\r\n        {\r\n          title: \"ราคารวม (บาท)\",\r\n          dataIndex: \"order_meterail_price\",\r\n          key: \"order_meterail_price\",\r\n          width: \"10%\",\r\n          scopedSlots: {\r\n            customRender: \"order_meterail_price\",\r\n          },\r\n        },\r\n      ],\r\n      order_meterail: [\r\n        {\r\n          key: 1,\r\n          order_meterail_code: \"MDS5010770\",\r\n          order_meterail_name: \"กระดาษถ่ายเอกสาร A4 Double A\",\r\n          order_meterail_amount: 50,\r\n          order_meterail_unit: \"ริม\",\r\n          order_meterail_price: \"6500\",\r\n        },\r\n      ],\r\n      visible: false,\r\n    };\r\n  },\r\n  watch: {\r\n    startValue(val) {\r\n      console.log(\"startValue\", val);\r\n    },\r\n    endValue(val) {\r\n      console.log(\"endValue\", val);\r\n    },\r\n  },\r\n  methods: {\r\n    genDate(date) {\r\n      const self = this;\r\n      let dateThai = new Date(date).toISOString().split(\"T\")[0];\r\n      dateThai = `${dateThai.split(\"-\")[2]} ${\r\n        self.month[parseInt(dateThai.split(\"-\")[1]) - 1]\r\n      } ${parseInt(dateThai.split(\"-\")[0]) + 543}`;\r\n      return dateThai;\r\n    },\r\n    changeCondition() {\r\n      const self = this;\r\n      self.start_search = 1;\r\n      self.end_search = self.PageSize;\r\n      self.getPurchaseOrderRecord();\r\n    },\r\n    showModal(index) {\r\n      console.log(index);\r\n      const self = this;\r\n      self.purchase.purchase_order_code =\r\n        self.purchase_order[index].purchase_order_code;\r\n      self.purchase.purchase_order_company =\r\n        self.purchase_order[index].purchase_order_company;\r\n      self.purchase.purchase_order_total =\r\n        self.purchase_order[index].purchase_order_total;\r\n      self.purchase.purchase_order_date =\r\n        self.purchase_order[index].purchase_order_date;\r\n      self.purchase.purchase_order_paymant =\r\n        self.purchase_order[index].purchase_order_paymant;\r\n      self.purchase.purchase_order_vat =\r\n        self.purchase_order[index].purchase_order_vat;\r\n      self.purchase.purchase_order_paymant_total =\r\n        self.purchase_order[index].purchase_order_paymant_total;\r\n      self.purchase.purchase_order_creator =\r\n        self.purchase_order[index].purchase_order_creator;\r\n\r\n      let data = {\r\n        purchase_order_id: self.purchase_order[index].purchase_order_id,\r\n      };\r\n      axios\r\n        .post(self.$store.state.url + \"/purchaseOrderRouters/getByID\", data)\r\n        .then(function(res) {\r\n          console.log(res);\r\n          self.order_meterail = [];\r\n          res.data.results.forEach(function(ele, index) {\r\n            self.order_meterail.push({\r\n              key: index + 1,\r\n              order_meterail_code: ele.material_code,\r\n              order_meterail_name: ele.material_name,\r\n              order_meterail_amount: ele.purchase_order_material_import_amount,\r\n              order_meterail_unit: ele.unit_name,\r\n              order_meterail_price: ele.purchase_order_material_price_total,\r\n            });\r\n          });\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n\r\n      self.visible = true;\r\n    },\r\n    getCondition() {\r\n      const self = this;\r\n      self.condition = ``;\r\n      self.condition += `where (pco.purchase_order_code LIKE \"%${self.text_search}%\" or pco.purchase_order_company LIKE \"%${self.text_search}%\") \\n`;\r\n      if (self.start_date_search && self.end_date_search) {\r\n        self.condition += `and pco.purchase_order_create_date between CAST('${\r\n          new Date(self.start_date_search).toISOString().split(\"T\")[0]\r\n        }' as DATE) and CAST('${\r\n          new Date(self.end_date_search).toISOString().split(\"T\")[0]\r\n        }' AS DATE) \\n`;\r\n      }\r\n    },\r\n    changePageTable(current) {\r\n      console.log(current);\r\n      const self = this;\r\n      self.start_search = self.PageSize * (current - 1) + 1;\r\n      self.end_search = self.PageSize * (current - 1) + parseInt(self.PageSize);\r\n\r\n      self.getPurchaseOrder();\r\n      self.getTotalRequisitionOrder();\r\n    },\r\n    getPurchaseOrderRecord() {\r\n      const self = this;\r\n      self.getCondition();\r\n      axios\r\n        .post(\r\n          self.$store.state.url +\r\n            \"/purchaseOrderRouters/getRecordPurchaseOrder\",\r\n          {\r\n            condition: self.condition,\r\n          }\r\n        )\r\n        .then(function(response) {\r\n          console.log(response);\r\n          self.total_search = response.data.results[0].total_Row;\r\n          self.getPurchaseOrder();\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    getPurchaseOrder() {\r\n      const self = this;\r\n      self.getCondition();\r\n      axios\r\n        .post(self.$store.state.url + \"/purchaseOrderRouters/getByCondition\", {\r\n          condition: self.condition,\r\n          start: self.start_search,\r\n          end: self.end_search,\r\n        })\r\n        .then(function(res) {\r\n          console.log(res);\r\n          const data = res.data.results;\r\n          self.purchase_order = [];\r\n          data.forEach(function(ele) {\r\n            self.purchase_order.push({\r\n              key: ele.num,\r\n              purchase_order_id: ele.purchase_order_id,\r\n              purchase_order_code: ele.purchase_order_code,\r\n              purchase_order_company: ele.purchase_order_company,\r\n              purchase_order_date: self.genDate(ele.date),\r\n              purchase_order_total: ele.purchase_order_amount,\r\n              purchase_order_paymant: ele.purchase_order_payment_amount,\r\n              purchase_order_vat: ele.purchase_order_vat_amount,\r\n              purchase_order_paymant_total:\r\n                ele.purchase_order_net_payment_amount,\r\n              purchase_order_creator: ele.purchase_order_creator,\r\n            });\r\n          });\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    getTotalRequisitionOrder() {\r\n      const self = this;\r\n      let data = {\r\n        date_Start: new Date(self.start_date_search)\r\n          .toISOString()\r\n          .split(\"T\")[0],\r\n        date_End: new Date(self.end_date_search).toISOString().split(\"T\")[0],\r\n      };\r\n      axios\r\n        .post(\r\n          self.$store.state.url + \"/purchaseOrderRouters/getPurchaseOrderTotal\",\r\n          data\r\n        )\r\n        .then(function(res) {\r\n          console.log(res);\r\n          self.totallist = res.data.results[0].total;\r\n          self.totalawait = res.data.results[0].depleted;\r\n          self.totalsucces = res.data.results[0].undepleted;\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    getChart() {\r\n      const self = this;\r\n      self.getCondition();\r\n      axios\r\n        .post(self.$store.state.url + \"/purchaseOrderRouters/genChartByMonth\")\r\n        .then(function(res) {\r\n          console.log(res);\r\n          let data = res.data.results[0];\r\n          self.chartOptions.xAxis.categories = [\r\n            self.month[parseInt(data.month_12) - 1],\r\n            self.month[parseInt(data.month_11) - 1],\r\n            self.month[parseInt(data.month_10) - 1],\r\n            self.month[parseInt(data.month_9) - 1],\r\n            self.month[parseInt(data.month_8) - 1],\r\n            self.month[parseInt(data.month_7) - 1],\r\n            self.month[parseInt(data.month_6) - 1],\r\n            self.month[parseInt(data.month_5) - 1],\r\n            self.month[parseInt(data.month_4) - 1],\r\n            self.month[parseInt(data.month_3) - 1],\r\n            self.month[parseInt(data.month_2) - 1],\r\n            self.month[parseInt(data.month_1) - 1],\r\n          ];\r\n\r\n          self.chartOptions.series[0].data = [\r\n            data.m12,\r\n            data.m11,\r\n            data.m10,\r\n            data.m9,\r\n            data.m8,\r\n            data.m7,\r\n            data.m6,\r\n            data.m5,\r\n            data.m4,\r\n            data.m3,\r\n            data.m2,\r\n            data.m1,\r\n          ];\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    disabledStartDate(startValue) {\r\n      const endValue = this.endValue;\r\n      if (!startValue || !endValue) {\r\n        return false;\r\n      }\r\n      return startValue.valueOf() > endValue.valueOf();\r\n    },\r\n    disabledEndDate(endValue) {\r\n      const startValue = this.startValue;\r\n      if (!endValue || !startValue) {\r\n        return false;\r\n      }\r\n      return startValue.valueOf() >= endValue.valueOf();\r\n    },\r\n    handleStartOpenChange(open) {\r\n      if (!open) {\r\n        this.endOpen = true;\r\n      }\r\n    },\r\n    handleEndOpenChange(open) {\r\n      this.endOpen = open;\r\n      this.changeCondition();\r\n    },\r\n  },\r\n  created() {\r\n    this.getPurchaseOrderRecord();\r\n    this.getTotalRequisitionOrder();\r\n    this.getChart();\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scope>\r\n.MDS_import {\r\n  .text-head {\r\n    font-size: 135%;\r\n    font-weight: 600;\r\n  }\r\n  .text-number {\r\n    font-size: 135%;\r\n    font-weight: 600;\r\n  }\r\n\r\n  .btn-margi_two {\r\n    .ant-btn {\r\n      margin-right: 1%;\r\n    }\r\n  }\r\n  .ant-table {\r\n    img {\r\n      width: 120px;\r\n      width: 120px;\r\n    }\r\n    th {\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n    }\r\n    td {\r\n    }\r\n  }\r\n\r\n  .label {\r\n    font-size: 16px;\r\n    font-weight: 500;\r\n  }\r\n}\r\n</style>\r\n"]}]}